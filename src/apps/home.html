<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <title>iAUTHOR</title>
    <link rel="stylesheet" href="font-awesome-4.6.3/css/font-awesome.min.css" type="text/css" />
    <link rel="stylesheet" href="dist/themes/default/style.min.css" />
    <script src="js/Chart.min.js"></script>
    <!-- <script src="dist/libs/jquery.js"></script> -->
    <!-- 5 include the minified jstree source -->
    <!--	<script type='text/javascript' src='http://ajax.googleapis.com/ajax/libs/jquery/2.1.3/jquery.min.js'> </script>
	<script src="//ajax.googleapis.com/ajax/libs/jquery/1.11.1/jquery.min.js"></script>
	<script src="http://code.jquery.com/jquery-1.7.1.js"></script>
	<script src="https://code.jquery.com/jquery-1.10.2.js"></script>-->
    <link rel="stylesheet" type="text/css" href="build/rappid.min.css">
    <link rel="stylesheet" type="text/css" href="css/theme-picker.css">
    <link rel="shortcut icon" href="images/log.png" />

    <style>
        #dataTable {
            border-collapse: collapse;
        }

        #modal-background-version {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: white;
            opacity: .50;
            -webkit-opacity: .5;
            -moz-opacity: .5;
            filter: alpha(opacity=50);
            z-index: 1000;
        }

        .YesNobtn {
            text-align: center;
            margin: 20px;
        }

        #modal-content-version {
            background-color: white;
            border-radius: 10px;
            -webkit-border-radius: 10px;
            -moz-border-radius: 10px;
            box-shadow: 0 0 20px 0 #222;
            -webkit-box-shadow: 0 0 20px 0 #222;
            -moz-box-shadow: 0 0 20px 0 #222;
            display: none;
            height: 180px;
            left: 50%;
            margin: -120px 0 0 -160px;
            padding: 10px;
            position: absolute;
            top: 50%;
            width: 252px;
            z-index: 1000;
        }

        #modal-background-version.active,
        #modal-content-version.active {
            display: block;
        }


        #modal-background {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: white;
            opacity: .50;
            -webkit-opacity: .5;
            -moz-opacity: .5;
            filter: alpha(opacity=50);
            z-index: 1000;
        }

        .YesNobtn {
            text-align: center;
            margin: 20px;
        }

        #modal-content {
            background-color: white;
            border-radius: 10px;
            -webkit-border-radius: 10px;
            -moz-border-radius: 10px;
            box-shadow: 0 0 20px 0 #222;
            -webkit-box-shadow: 0 0 20px 0 #222;
            -moz-box-shadow: 0 0 20px 0 #222;
            display: none;
            height: 80px;
            left: 50%;
            margin: -120px 0 0 -160px;
            padding: 10px;
            position: absolute;
            top: 50%;
            width: 252px;
            z-index: 1000;
        }

        #modal-background.active,
        #modal-content-version.active {
            display: block;
        }

        body {
            font-family: sans-serif;
        }
        #reporttbody{
            display:block;
            border: 2px solid black;
            border-collapse: separate;
            border-spacing: 4px; 
            margin-bottom:10px;
        }
    </style>


    <!--  -->
    <!-- <script src="http://code.jquery.com/jquery-1.11.3.min.js"></script> -->




</head>

<body>
    <div id="app">
        <!--
        <div style="margin-left: 240px;position: relative;left: 250px;"><span style="font-size: 20px;font-weight: bold;padding-top:5px;padding-bottom: 5px;display:block;">iAuthor Ver 2.0  </span></div> -->
        <div class="MainHeading" style="display:none;">
            <a href="#" class="logo">
                <img src="images/Capgemini_Logo.png">
            </a>
            <span class="horzontaline"></span>
            <h1  id="titleId">iAUTHOR</h1>
            <div class="header-right">
                <ul id="navigation-main">
                    <li id='langId'>
                        <select id="langDD" class="active"><option class="active" value="en" selected>English</option><option class="active" value="es-MX">Spanish</option><option class="active" value="ja">Japanese</option></select>
                        <li id='homeId'>
                        <a href="#" class="active">Home</a>
                    </li>
                    <li id='adminId'>
                        <a href="#">Admin</a>
                    </li>
                    <li id="nav-help">
                        <a title="Help" id="helpId">
                            <span>?</span>
                        </a>
                        <ul id="subnav">
                            <li id='userGuideId'>
                                <a href="docs/iAuthor_User_Guide.pdf" target="_blank">User Guide</a>
                            </li>
                            <li id='adminGuideId'>
                                <a href="docs/iAuthor_Admin_Guide.pdf" target="_blank">Admin Guide</a>
                            </li>
                        </ul>
                    </li>
                </ul>
                <div id="userNameId">
                    <span class="welcometext">Welcome</span>
                    <span><a href="#" title="Logout" class="logouttxt"></a></span>
                </div>
            </div>
        </div>
        <div class="icon-heading">
            <span class="toolbar-container" style="display:none;">
                <span class="zoomtofitbrackets">[&nbsp;]</span>
            </span> 
           <span id="stencilleftArrow"><i class="fa fa-chevron-left" style="cursor:pointer;margin-top:10px;"  aria-hidden="true"></i></span> 
            <span class="stencil-icons">                            
                <div class="stencil-container"></div>                   
            </span>   
            <span id="stencilrightArrow"><i class="fa fa-chevron-right"  style="cursor:pointer;margin-top: 10px;" aria-hidden="true"></i></span>       
            <span id="validid"></span>
           
            <span class="icon-heading-buttons" style="display:none;">
                    
                <input type="button" value="SAVE" class=" global-btn navybluecolor-btn marginsave btnSave" id="btn-png-save" />
                <input type="button" value="Validate" id="btn-validate" class="global-btn greycolor-btn btnCompileGraph" />
                <input type="button" value="PUBLISH" class=" global-btn greencolor-btn btnPublishVersion" id="btn-publish-version" />
            </span>
        </div>

        <div class="Main-Container" style="display:none;">
            <div class="Left-Container">
                <div class="Left-Cont-First-Header">
                    <table style="width: 100%;display:none" id="treeTopNav">
                        <tr>
                            <td>
                                <img src="images/newfolder_icon.png" style="width: 19px;height: 19px;" data-tooltip="Create new project" data-tooltip-position="bottom"
                                    class="projectMenu projectOption moduleOptions modelOptions createNewProject">
                            </td>
                            <td>
                                <img src="images/newmodule_icon.png" style="width: 19px;height: 19px;" data-tooltip="Create new module" data-tooltip-position="bottom"
                                    class="projectMenu projectOption createNewModule">
                            </td>
                            <td>
                                <img src="images/newmodule_2_icon.png" style="width: 20px;height: 19px;" data-tooltip="Create new model" data-tooltip-position="bottom"
                                    class="projectMenu modelOptions createNewModel">
                            </td>
                            <td>
                                <img src="images/newfile_icon.png" style="width: 20px;height: 20px;" data-tooltip="Create new version" data-tooltip-position="bottom"
                                    class="projectMenu createNewVersion">
                            </td>
                            <td>
                                <img src="images/import_icon.png" style="width: 19px;height: 18px;margin-top: 5px;" data-tooltip="Import File" data-tooltip-position="bottom"
                                    class="projectMenu importFile">
                            </td>
                            <td>
                                <span class="accordionlefttabs">
                                    <i class="fa fa-minus" aria-hidden="true"></i>
                                </span>
                            </td>
                        </tr>
                    </table>

                </div>
                <div class="Left-Cont-First-Container accordion-container">
                    <div id="jstree_demo" style="width: 250px;overflow: auto;height: calc(100% - 0px);font-size: 12px;"></div>
                </div>
                <div class="Left-Cont-inspector" style="display:none;">
                    <span id="inspectorTabNameId">INSPECTOR</span>
                    <span class="accordionlefttabinspector">
                        <i class="fa fa-minus" aria-hidden="true"></i>
                    </span>
                </div>
                <div class="inspector-container" id="inspector-container-id">

                </div>
                <!-- <div class="Left-Cont-Second-Header">Text</div>
            <div class="Left-Cont-Second-Container"><textarea></textarea></div>-->
                <div class="Left-Cont-Third-Header">
                    <span id="scenariosTabNameId">SCENARIOS</span>
                    <span class="accordionlefttabsthree">
                        <i class="fa fa-minus" aria-hidden="true"></i>
                    </span>
                    <input type="button" class="global-btn navybluecolor-btn btn-left btnGenerate scenario" id="btn-png-scenario1" Value="Generate"
                    />
                </div>
                <div class="Left-Cont-Third-Container accordion-containerthree">

                    <div class="scenarioContainer">
                        <div id="filterScenarioDiv" style="display:none;">
                            <table>
                                <tr>
                                    <td>
                                        <select class="dropdown" id="sceDet_Type" onchange="filterScenarios(this.value)">
                                            <option value="0">All Scenarios</option>
                                            <option value="1">Sanity Scenarios</option>
                                            <option value="2">Normal Scenarios</option>
                                            <option value="3">Primary Flow</option>
                                            <option value="4">Alternate Flow</option>
                                            <option value="5">Exception Scenarios</option>
                                        </select>
                                    </td>
                                    <td>
                                        <div>
                                            <div class="selectBox" id="toggleColumns">
                                                <select class="dropdown" id="col_type">
                                                    <option value="Columns">Columns</option>
                                                </select>
                                                <div class="overSelect"></div>
                                            </div>
                                            <div id="toggleColumnsDiv" style="z-index:500;">
                                                <label>
                                                    <input type="checkbox" name="columns" value="Criticality" id="criticalityCheck"><span id="criticalityLabel">Criticality</span></label>
                                                <label>
                                                    <input type="checkbox" name="columns" value="Severity" id="severityCheck"><span id="severityLabel">Severity</span></label>
                                                <label>
                                                    <input type="checkbox" name="columns" value="Risk Index" id="riskCheck"><span id="riskIndexLabel">Risk Index</span></label>
                                                <label>
                                                    <input type="checkbox" name="columns" value="Defects" id="defectsCheck"><span id="defectsLabel">Defects</span></label>
                                                <label>
                                                    <input type="checkbox" name="columns" value="Frequency" id="frequencyCheck"><span id="frequencyLabel">Frequency</span></label>
                                            </div>
                                        </div>
                                </tr>
                            </table>
                        </div>

                        <div id="scenarioDataDiv"></div>
                    </div>


                </div>
            </div>
            <div class="Right-Container">
                <div class="paperContainer paper-container">
                </div>
                <div class="RightContaineronpaper">
                    <div class="matricsAccordion" style="display:none;">


                        <div data-role="tabs">
                            <ul id="modalTabs">
                                <li class="modelmet" id="current">
                                    <a href="#tab1" id="modelMetricsHeader">Model Metrics</a>
                                </li>
                                <li class="modelcomments">
                                    <a href="#tab2" id="modelCommentsHeader">Model Comments</a>
                                    <span id="commentstabdis">0</span>
                                </li>
                            </ul>
                            <div id="content">
                                <div id="tab1" class="tabcontentone">
                                    <div class="right-Cont-first-Container">
                                        <div id="bgopacitymatrix"></div>
                                        <table id="metricstable" class="matricsAccordion">
                                            <tr>
                                                <td>
                                                    <span class="horizontalline"></span>
                                                    <span class="modelscenarioLabel">No of Scenarios:</span>
                                                    <span id="modelscenarioId"></span>
                                                </td>

                                                <td>
                                                    <span class="horizontalline"></span>
                                                    <span class="modelsanityLabel">Sanity Scenarios:</span>
                                                    <span id="modelSanity"></span>
                                                </td>
                                            </tr>

                                            <tr>
                                                <td>
                                                    <span class="horizontalline"></span>
                                                    <span class="modelNormalLabel">Normal Scenarios:</span>
                                                    <span id="modelNormal"></span>
                                                </td>
                                                <td>
                                                    <span class="horizontalline"></span>
                                                    <span class="modelExceptionLabel"> Exception Scenarios:</span>
                                                    <span id="modelException"></span>
                                                </td>

                                            </tr>

                                            <tr>
                                                <td>
                                                    <span class="horizontalline"></span>
                                                    <span class="modelCriticalityLabel">High Criticality:</span>
                                                    <span id="modelCriticality"></span>
                                                </td>

                                                <td>
                                                    <span class="horizontalline"></span>
                                                    <span class="modelNodesLabel">No of Nodes:</span>
                                                    <span id="modelNodes"></span>
                                                </td>
                                            </tr>
                                        </table>
                                    </div>
                                </div>
                                <div id="tab2" class="tabcontenttwo" style="display:none;">
                                    <div class="insideContainer">
                                        <div class="latestComments" style="display:none"></div>
                                        <textarea placeholder="Type your comment here" id="addCommentId"></textarea>
                                        <a href="#" class="more-btn">More...</a>
                                        <input type="button" value="Post" style="display:none;" class="global-btn post-btn" id="post-btn" />
                                        <div class="moreCommentsDiv" style="display:none;">
                                        </div>
                                    </div>
                                    <div>
                                        <input type="button" value="Close" style="display:none;" class="global-btn closemet-btn" />
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="navigator-container" id="nav-Container" style="display:none;">
                    </div>
                </div>
            </div>
            <div class="bottomPanel tabbing" style="display:none;">
                <div class="tab">
                    <!--<button class="tablinks" data-prop="properties"><i class="fa fa-table" aria-hidden="true"></i>Properties</button> -->
                    <a class="tablinks" data-prop="problems" id="problemtab">
                        <i class="fa fa-exclamation-circle" aria-hidden="true" style="color:red"></i><span id="problemsLabel">Problems</span></a>
                    <a class="tablinks" data-prop="scen_det" id="scenarioTab">
                        <i class="fa fa-th" aria-hidden="true"></i><span id="sceDetailsLabel">Scenario Details</span></a>
                    <a class="tablinks" data-prop="step_desc" id="desctiptionTab">
                        <i class="fa fa-th" aria-hidden="true"></i><span id="descLabel">Description</span></a>
                    <a class="tablinks active" data-prop="tes_cond" id="TestConditions">
                        <i class="fa fa-codepen" aria-hidden="true"></i><span id="testCondLabel">Test Condition</span></a>
                    <!--<button class="tablinks" data-prop="description"><i class="fa fa-delicious" aria-hidden="true"></i>Description</button> -->
                    <a class="tablinks" data-prop="preview_test" onclick="setpathCoverageSelectedFlag(false)" id="previewtest">
                        <i class="fa fa-table" aria-hidden="true"></i><span id="previewTCLabel">Preview TestCase</span></a>
                    <a class="tablinks" data-prop="node_trace" id="Nodetracetab">
                        <i class="fa fa-building-o" aria-hidden="true"></i><span id="nodeTraceLabel">Node Traceability</span></a>
                    <a class="tablinks" data-prop="PathCoverage_trace" onclick="setpathCoverageSelectedFlag(true)" id="PathCoveragetab">
                        <i class="fa fa-building-o" aria-hidden="true"></i><span id="pathCoverLabel">Path Coverage</span></a>
                    <a class="tablinks" data-prop="requirement_det" id="requirementtab">
                        <i class="fa fa-building-o" aria-hidden="true"></i><span id="reqLabel">Requirement</span></a>  
                    <!--<a class="tablinks" data-prop="cutest_test" id="cutesttab">
                        <i class="fa fa-building-o" aria-hidden="true"></i><span id="cutestLabel">CUTest</span></a>        -->
                </div>

                <!--<div id="properties" class="tabcontent">
		<p>TBD</p>
	</div>-->

                <div id="problems" class="tabcontent details">
                    <ul class="errorList">
                        0 Errors, Problems
                    </ul>
                </div>
                <div id="requirement_det" class="tabcontent details">
                   <table id="requirementTable">
                       <tr><thead><th style="width:6%;">SNO</th><th>Requirment Name</th></thead></tr>
                       
                   </table>
                   <div id="requirementMsg" style="text-align: center;"></div>
                </div>
                <div id="scen_det" class="tabcontent details" style="display:none">
                    <div id="scen_det1" style="width: 55%;float:left">
                        <table id="scenariodetailsLeftTable" style="font-size: 12px;">
                            <tr>
                                <td>
                                    <span id="sce_det_label_sceId">Scenario Id</span>
                                    <span id="sceDet_scenId_error" style="color:red"></span>
                                </td>
                                <td>
                                    <input type="text" size="15" id="sceDet_scenId" disabled/>
                                    <input type="hidden" id="sceDet_id" disabled />
                                </td>
                                <td>
                                    <span id="sce_det_label_name">Name</span>
                                    <span id="sceDet_name_error" style="color:red"></span>
                                </td>
                                <td>
                                    <input type="text" id="sceDet_name" size="15" maxlength="2000" />
                                </td>
                            </tr>
                            <tr>
                                <td>
                                    <span id="sce_det_label_defects">Defects</span>
                                    <span id="sceDet_defects_error" style="color:red"></span>
                                </td>
                                <td>
                                    <input type="text" id="sceDet_defects" value="0" size="15" />
                                </td>
                                <td>
                                    <span id="sce_det_label_te">Testing Effort</span>
                                    <span id="sceDet_testEff_error" style="color:red"></span>
                                </td>
                                <td>
                                    <input type="text" id="sceDet_testEff" value="0.0" size="15" />
                                </td>
                            </tr>
                            <tr>
                                <td>
                                    <span id="sce_det_label_criticality">Criticality</span>
                                    <span id="sceDet_criticality_error" style="color:red"></span>
                                </td>
                                <td>
                                    <select id="sceDet_criticality">
                                        <option value="5">Very High</option>
                                        <option value="4">High</option>
                                        <option value="3">Medium</option>
                                        <option value="2">Low</option>
                                        <option value="1">Very Low</option>
                                    </select>
                                </td>
                                <td>
                                    <span id="sce_det_label_severity">Severity</span>
                                    <span id="sceDet_severity_error" style="color:red"></span>
                                </td>
                                <td>
                                    <input type="text" id="sceDet_severity" value="1" size="15" />
                                </td>
                            </tr>
                            <tr>
                                <td>
                                    <span id="sce_det_label_re">Risk Exposer</span>
                                    <span id="sceDet_riskEx1_error" style="color:red"></span>
                                </td>
                                <td>
                                    <input type="text" id="sceDet_riskEx1" size="15" value="Low" disabled />
                                </td>
                                <td>
                                    <span id="sce_det_label_pf">Primary Flow</span>
                                </td>
                                <td>
                                    <input type="checkbox" id="sceDet_primFlow" />
                                </td>
                            </tr>
                            <tr>
                                <td>
                                    <span id="sce_det_label_ri">Risk Index</span>
                                    <span id="sceDet_riskEx1_error" style="color:red"></span>
                                </td>
                                <td>
                                    <input type="text" id="sceDet_riskEx2" size="15" value="2.0" disabled />
                                </td>

                            </tr>
                            <tr>
                                <td>
                                    <input type="button" value="Save" class="btn-default-home" id="saveScenarioDetails" />

                                </td>
                                <td>&nbsp;</td>
                            </tr>
                        </table>
                    </div>

                    <!--	<div id="scen_det2" style="width: 20%;float:left;height: 170px;">
			<table style="font-size: 12px;" >
				<tr>
					<td>
						PreCondition
					</td>
				</tr>
				<tr>
					<td>
						<textarea id="sceDet_preCnd" rows="4" cols="30"></textarea>
					</td>
				</tr>
				<tr>
					<td>
						PostCondition
					</td>
				</tr>
				<tr>
					<td>
						<textarea id="sceDet_postCnd" rows="4" cols="30" ></textarea>
					</td>
				</tr>
			</table></div>-->


                  <!--  <div id="scen_det3" style="width: 45%;float:left;">
                        <table data-role="table" class="ui-responsive ui-shadow" style="width:100%;margin: 0px auto;" id="reqTable">
                            <thead>
                                <tr>
                                    <th> Requirement Id</th>
                                    <th>Scenario Id</th>
                                    <th>Scenario Name</th>
                                </tr>
                            </thead>
                            <tbody></tbody>
                        </table>
                    </div> -->
                </div> 

	<div id="tes_cond" class="tabcontent details" style="display:none">
    <div id="cafenext_wrapper" style="display:none;">
        <div class="test-condition-lefttable" >
        <div class="tes_cond-buttons">
        <label id="test_steps_label">Test Steps:</label>
            <!--<input type="file" class="btn-default-home" id="import_excel" accept="application/vnd.ms-excel,.xlsm, application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"/>
            <button type="submit" class="btn-default-home" id = "download_template_TestStep">GetTemplate</button>-->
            <input type="button" class="btn-default-home" value="Save" id = "save_test_cond" disabled />
            <input type="button" class="btn-default-home" value="Add Row" id = "add_row"/>
            <input type="button" class="btn-default-home" value="Delete Row" id = "delete_row" />
            </div>		
            <table id="dataTable">
                <!--<caption>Test Steps</caption>-->
                <thead>
                <tr>
                    <th style="width:4%;"><input type="checkbox" name="Selectall" id="tes-cond-chk-all" /></th>
                    <th style="width:4%">#</th>
                    <th style="width:14%">Action</th>
                    <th style="width:19%">TargetType</th>
                    <th style="width:17%">Target</th>
                    <th style="width:18%">Step Data</th>
                    <th style="width:21%">Description</th>
                    <th style="width:4%"><i class="fa fa-cog" aria-hidden="true"></i></th>
                    <th style="width:0%"></th>
                </tr>
                </thead>
                <tbody>
                <tr>
                <td><input type="checkbox" name="chk" id="tes-cond-chk-box"/></td>
                <td><label><span></span></label></td>
                <td>
                    <select id="tes_cond_action">
                        <option value="Select Action">Select Action</option>
                    </select>
                </td>
                <td>
                    <select id="tes_cond_targettype">
                        <option>Select Target Type</option>
                    </select>
                </td>
                <td>
                    <input type="text" id="tes_cond_target" disabled = "false"/>
                </td>
                <td>
                    <input type="text" id="tes_cond_step_data"  disabled = "true"/>
                </td>
                <td>
                    <!--<input type="text" id="tes_cond_description" />-->
                    <label id='tes_cond_description'></label>
                </td>
                <td>
                    <!--<input type="text" id="tes_cond_description" />-->
                    <label id='test_data'><i class="fa fa-external-link-square"> </i></label>
                    <!--<label id='tes_cond_stepId'></label> -->
                </td>
                <td hidden="true"><label id='tes_cond_stepId'></label></td>
                </tr>
            </tbody>
            </table>
            <label id = 'display_msg_test_step' hidden = 'true' >Please click 'Add Row' button to enter values</label>
            </div>
    <!--	</div>
            <Div id = "testData"> -->
            <div class="test-condition-righttable" >
            <!--<input type="file" class="btn-default-home" id="import_excel_data" style="width:120px;" accept="application/vnd.ms-excel, application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"/>
            <button type="submit" class="btn-default-home" id = "download_template_TestData" style="width:80px;">GetTemplate</button>
            --><input type="button" class="btn-default-home" value="Save" id = "save_test_data" disabled />
            <input type="button" class="btn-default-home" value="Add" id = "add_row_data" disabled />
            <input type="button" class="btn-default-home" value="Delete" id = "delete_row_data" disabled />			
            <table id="testDataTable"  style="float:right;margin-top: 3px;">
                    <thead>
                    <tr>
                        <th style="width:10%;"><input type="checkbox" name="Selectall" /></th>
                        <th style="width:10%;">#</th>
                        <th style="width:40%;">Target</th>
                        <th style="width:40%;">Data</th>   
                        <th style="width:0%"></th>                
                    </tr>
                    </thead>
                    <tbody>
                    <tr>
                    <td><input type="checkbox" name="chk"/></td>
                    <td><label><span></span></label></td>
                    <td>
                        <label id='tes_data_action'></label>
                    </td>
                    <td>
                        <input type="text" id="tes_data"  disabled />
                    </td>
                    <td hidden="true">
                        <label id='tes_cond_dataId'></label>
                    </td>                			
                    </tr>
                </tbody>
                </table>    
        </div>            
            <label id = 'display_msg_test_data' hidden = 'true'>Please click 'Add' button to enter values</label>
        </div>
        <div id="opentest_wrapper" style="display:none;">
            <table id="ot_btn_table">
            <tr>
                <td>Test Steps: </td>
                <td><input type="button" class="save btn-default-home" onclick="save_row();" value="Save"></td>                
                <td><input type="button" class="add btn-default-home" onclick="add_row();" value="Add Row"></td>
                <td><input type="button" class="delete btn-default-home" onclick="delete_row();" value="Delete Row"></td>
                <td><!--<div style="padding-left: 70px;">Type: <input type="radio" name="actTyp" value="appium" checked>Appium <input type="radio" name="actTyp" value="selenium">Selenium <input type="radio" name="actTyp" value="generic">Generic</div>--></td>
            </tr>
           </table>
            <table align='center' cellspacing=2 cellpadding=5 id="ot_data_table" border=1>
               <tr>
                    <th><input type="checkbox" /></th>
                    <th>#</th>
                    <th>Action</th>
                    <th>Arguments</th>
                    <th>Description</th>
                 </tr> 
            </table>
            </div>
    
    </div>


                <!--<div id="description" class="tabcontent">
		<p>TBD</p>
	</div>-->
                <div id="node_trace" class="tabcontent details" style="position: absolute;display:none">
                    <table id="nodeTraceTable">
                        <thead>
                            <tr>
                                <th style="width:5%;">#</th>
                                <th style="width:10%;">Scenario ID</th>
                                <th style="width:65%;">Scenario Name</th>
                                <th style="width:10%;">Criticality</th>
                                <th style="width:10%;">Risk Exposure</th>
                            </tr>
                        </thead>
                        <tbody></tbody>
                    </table>
                </div>
                <div id="preview_test" class="tabcontent details" style="display:none;">
                    <button id="exportexcel" class="btn-default-home">
                        <i class="fa fa-table" aria-hidden="true"></i><span id="exportCafenextLabel">Export TestCases Cafenext</span></button>
                    <button id="manualexportexcel" class="btn-default-home">
                        <i class="fa fa-table" aria-hidden="true"></i><span id="exportManualTCLabel">Export Manual TestCase</span></button>
                    <button id="exporttestcasetohpqc" class="btn-default-home">
                        <i class="fa fa-table" aria-hidden="true"></i><span id="exportHpalmTCLabel">Export Testcases to HP-ALM</span></button>
                    <button id="exporttestcasetojira" class="btn-default-home">
                        <i class="fa fa-table" aria-hidden="true"></i><span id="exportJiraTCLabel">Export Testcases to Jira</span></button>
                    <button id="exporttestcasetoopentest" class="btn-default-home"><i class="fa fa-table" aria-hidden="true"></i><span id="exportOTTCLabel">Export Testcases to Opentest</span></button>
                    
                    <table id="PreviewTable">
                        <thead>
                            <tr>
                                <th style="width:7%;">ScenarioID</th>
                                <th style="width:30%;">ScenarioName</th>
                                <th style="width:28%;">Component Name</th>
                                <th style="width:10%;">Step ID</th>
                                <th style="width:25%;">Step Description</th>
                            </tr>
                        </thead>
                        <tbody align='center'></tbody>
                    </table>

                </div>


                <div id="PathCoverage_trace" class="tabcontent details" style="display:none;">
                    <!--<button id="analze" class="btn-default-home"><i class="fa fa-table" aria-hidden="true"></i>  Analze  </button>-->
                    <table id="PathCoverageMainTable" width="100%" border="1">
                        <tr>
                            <td style="width: 30%;vertical-align: top; horiz-align: center">
                                <div style="width:400px;height:100px;">
                                    <canvas id="bar-chart-horizontal" width="100" height="25"></canvas>
                                </div>
                            </td>
                            <td style="width: 30%;vertical-align: top; horiz-align: center">
                                <table id="PathCoveraTable">
                                    <thead>
                                        <tr>
                                            <th>Path Coverage Details</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                    </tbody>
                                </table>
                            </td>
                            <td style="width: 30%;vertical-align: top; horiz-align: center">
                                <!--<div id="pathCoverageSceDetailsTable" >
					</div>-->
                                <table id="pathCoverageSceDetailsTable">
                                    <!--<thead> <tr><th>Scenarios Details</th></tr></thead>-->
                                    <tbody>
                                    </tbody>
                                </table>

                            </td>
                        </tr>
                    </table>
                </div>
                <div id="step_desc" class="tabcontent details" style="display:none;">
                    <table id="descTable">
                        <thead>
                            <tr>
                                <th style="width:7%;">ScenarioID</th>
                                <th style="width:6%;">StepsID</th>
                                <th style="width:15%;">Steps</th>
                                <th style="width:36%;">Test Step</th>
                                <th style="width:36%;">Expected Result</th>
                            </tr>
                        </thead>
                        <tbody></tbody>
                    </table>
                </div>
                <div class="toolbarClose">
                    <table>
                        <tr>
                            <td>
                                <!--<i class="fa fa-minus-square-o" aria-hidden="" style="color:grey"></i>-->
                            </td>
                            <td>
                                <!-- <i class="fa fa-minus-square-o" aria-hidden="true"></i> -->
                                <!--<i class="fa fa-plus-square-o" aria-hidden="" style="color:grey"></i>-->
                            </td>
                            <td>
                                <!--<i class="" aria-hidden=""></i>-->

                                <span class="close-btn"></span>
                            </td>
                        </tr>
                    </table>
                </div>

            </div>
        </div>
    </div>

    <div id="popupdata"></div>
    <!-- <div class="app-header">
		<div class="header_logo_paddings">
			<table style="height:100%">
				<tr>
					<td>
					<img class="cg_logo" src="images/cg_logo_white.png" style="padding-right:20px;height: 32px;width: 138px;border-right: 1px solid #FFFFFF;"/> 
						<img class="cg_logo" src="images/cg_logo_white.png" style="padding-right:20px;height: 40px;width: 180px;margin-top: 1px"/>
					</td>
				</tr>
			<tr>
				 <td>
				<span style="color:white;padding-left:15px;font-size:20px;">iAUTHOR</span>
				</td>
				</tr>
			</table>

		</div>
		    <div class="app-title" style="background-color: white;">
               <h1 style="height: 86px"><img src="cg_logo.png" class="brandLogoImgIgate" style="margin-top: -40px;margin-left: -18px;height: 50px;position: relative;"></h1>

           </div> 
		<div class="toolbar-container">

		</div>
		<div id="userNameId" style="display: inline-block;float: right;width: 240px;padding-top: 5px;"></div>

	</div>-->

    <div class="app-body" style="display:none;">
        <!--	<div style="width: 240px;">
			<table style="width: 100%;display:none" id="treeTopNav">
				<tr>
					<td>
						<img src="images/nf.png" style="width: 20px;height: 20px;" data-tooltip="Create new project" data-tooltip-position="bottom" class="projectMenu projectOption moduleOptions modelOptions createNewProject">
					</td>
					<td>
						<img src="images/module.png" style="width: 20px;height: 20px;" data-tooltip="Create new module" data-tooltip-position="bottom" class="projectMenu projectOption createNewModule">
					</td>
					<td>
						<img src="images/fc.png" style="width: 20px;height: 20px;" data-tooltip="Create new model" data-tooltip-position="bottom" class="projectMenu modelOptions createNewModel">
					</td>
					<td>
						<img src="images/file.png" style="width: 20px;height: 20px;" data-tooltip="Create new version" data-tooltip-position="bottom" class="projectMenu createNewVersion">
					</td>
					<td>
						<img src="images/import.png" style="width: 20px;height: 20px;" data-tooltip="Import File" data-tooltip-position="bottom" class="projectMenu importFile">
					</td>

				</tr>
			</table>
		</div>-->
        <!--<div id="jstree_demo" style="background: white;width: 240px;overflow: auto;height: calc(49% - 30px);font-size: 12px;"></div>-->
        <!--<div class="stencil-container"></div>
		<input type="file" id="fileinput" onchange='openFile(event)' style="display:none">
		<div class="paper-container">
			

		</div>-->



        <!--<div class="navigator-container">
			<select class="joint-theme-modern joint-widget" id="btn-scenario" name="btn-scenario"  style="float:right;height: 30px;"  data-tooltip-position="top" data-tooltip-position-selector=".toolbar-container" data-type="select" data-name="0"> <option>Please Generate Scenario</option>    </select> 
		</div>-->

    </div>
    </div>


    <!--First Popup white creating version -->
    <button id="default-version" hidden="true">Launch popup for previous version copy</button>

    <div id="createversionmodal" align="center" style="display: none;">
        <div id="header-modal" align="left">
            <span>Create Version</span>
        </div>
        <div id="body-modal">
            <table>
                <tr>
                    <td>New version will be created from previous published version by default.</td>
                </tr>
                <tr>
                    <td>&nbsp;</td>
                </tr>
                <tr>
                    <td>If you want to create from different version click "yes".</td>
                </tr>
                <tr>
                    <td>&nbsp;</td>
                </tr>
            </table>

        </div>
        <table>
            <tr>
                <td>
                    <div id="footer-modal">
                        <input id="modal-yes-version" type="button" value="Yes">
                    </div>
                </td>
                <td>
                    <div id="footer-modal">
                        <input id="modal-blank-version" type="button" value="Blank Page">
                    </div>
                </td>
                <td>
                    <div id="footer-modal">
                        <input id="modal-close-version" type="button" value="Ok">
                    </div>
                </td>
            </tr>

        </table>
    </div>

    </div>

    <div id="importFile" style="display: none;">
        <div id="header-modal">
            <span>Import File</span>
        </div>
        <div id="body-modal">
            <table>
                <tr>
                    <td>
                        <div style="font-size: 12px; color: red;">Only shapes available in stencil are allowed in activity diagrams</div>
                    </td>
                </tr>
            </table>
            <table>
                <tr>
                    <td>
                        <label style="width:100%">Upload File:</label>
                        <input id="importFileInput" type="file" name="file" required="">
                    </td>
                </tr>
                <tr>
                    <td>
                        <div style="font-size: 11px;padding: 2px 5px 5px 20px;"> (Supports only vsdx, xml, xls, xlsx,bpmn files.)</div>
                    </td>
                </tr>
            </table>

            <table align="center">
                <tr>
                    <td>
                        <div id="footer-modal">
                            <input id="importButton" type="button" value="Import" style="float: right;">
                        </div>
                    </td>
                    <td>
                        <div id="footer-modal">
                            <input id="importcancel" type="button" value="Cancel" style="float: right;">
                        </div>
                    </td>
                </tr>
            </table>
        </div>
    </div>

    <div id="createProjectModal" style="display: none;" align="center">
        <div id="header-modal" class="header-modal1" align="left">
            <span>Create Project</span>
        </div>
        <div id="body-modal" class="createprojectpadding body-modal1">

            <table>
                <tr>
                    <td>
                        <label class="required">Business Account:</label>
                    </td>
                    <td>
                        <div id="busprojerror" align="left" style="font-size: 12px; color: red;"></div>
                        <select id="buNameId" name="buName"></select>
                    </td>
                    <td>
                        <label class="required">Project Name:</label>
                    </td>
                    <td>
                        <div id="projerror" align="left" style="font-size: 12px; color: red;"></div>
                        <input type="text" id="pNameId" name="pName" style="width:100%">
                    </td>
                </tr>
            </table>
        </div>
        <br/>
        <div id="header-modal" class="header-modal2" align="left">
            <span>Configure HP-ALM</span>
        </div>
        <div id="body-modal" class="createprojectpadding body-modal2">
            <table>
                    <tr>
                        <td><label>Connection URL:</label></td>
                        <td><input type="text" id="qcURL" name="scURL"></td>
                        <td><label>Domain:</label></td>
                        <td><input type="text" id="qcpdomain" style="width:100%"></td>
                    </tr>
                    <tr>
                        <td style="padding-top:10px;"><label>Project:</label></td>
                        <td style="padding-top:10px;"><input type="text" id="qcpproject"></td>
                    </tr>
                </table>
        </div>
    <div id="header-modal" class="header-modal3" align="left" style="margin-top:10px;">
        <span>Automation Integration Tool</span>
</div>
<div id="body-modal" class="createprojectpadding body-modal3">
        <table class="automationintegrationtable">
                <tr>
                 <td>
                     <label>Tool:</label>
                     <select id="automationIntegration">
                            <option value="CafeNext">CafeNext[Selenium,UFT,iCode]</option>
                            <option value="OpenTest">OpenTest</option>
                        </select>
                    </td>                  
                </tr>
               <tr>
                 <td><div id="typeoptions" style="padding-top:10px;display:none;"><label>Type:</label> <input type="radio" name="actTyp" value="appium" checked><label>Appium</label> <input type="radio" name="actTyp" value="selenium"><label>Selenium</label> <input type="radio" name="actTyp" value="generic"><label>Generic</label></div></td>              
               </tr>
            </table>
        </div>
        <table>
            <tr>
                <td>
                    <div id="footer-modal">
                        <input id="saveProjectButton" type="button" value="Save">
                    </div>
                </td>
                <td>
                    <div id="footer-modal">
                        <input id="cancelButton" type="button" value="Cancel">
                    </div>
                </td>
            </tr>

        </table>
    </div>


    <div id="createModuleModal" style="display: none;" align="center">
        <div id="header-modal" align="left">
            <span>Create Module</span>
        </div>
        <div id="body-modal">
            <div id="moduleerror" align="left" style="font-size: 12px; color: red;"></div>
            <table>
                <tr>
                    <td>
                        <label class="required">Module Name:&nbsp;</label>
                    </td>
                    <td>
                        <input type="text" id="moduleName" style="width:100%">
                        </select>
                    </td>
                </tr>
            </table>
        </div>

        <table>
            <tr>
                <td>
                    <div id="footer-modal">
                        <input id="saveModuleButton" type="button" value="Save">
                    </div>
                </td>
                <td>
                    <div id="footer-modal">
                        <input id="cancelModuleButton" type="button" value="Cancel">
                    </div>
                </td>
            </tr>

        </table>
    </div>


    <div id="createDiagramModal" style="display: none;" align="center">
        <div id="header-modal" align="left">
            <span>Create Diagram</span>
        </div>
        <div id="body-modal">
            <div id="daierror" align="left" style="font-size: 12px; color: red;"></div>
            <table>
                <tr>
                    <td>
                        <label class="required">Diagram Name:&nbsp;</label>
                    </td>
                    <td>
                        <input type="text" id="diagName" style="width:100%">
                        </select>
                    </td>
                </tr>
            </table>
        </div>

        <table>
            <tr>
                <td>
                    <div id="footer-modal">
                        <input id="saveDiagramButton" type="button" value="Save">
                    </div>
                </td>
                <td>
                    <div id="footer-modal">
                        <input id="cancelDiagramButton" type="button" value="Cancel">
                    </div>
                </td>
            </tr>

        </table>
    </div>


    <div id="createQCLoginModal" style="display: none;height:50%">
        <div id="header-modal">
            <span>HP-ALM Login</span>
        </div>
        <div id="login-modal">
            <div id="msgid"></div>
            <table>
                <tr>
                    <td></td>
                </tr>
                <tr>
                    <td style="float:right">Connection URL:&nbsp;</td>
                    <td>
                        <input type="text" id="cURL" name="cURL" style="width:125%">
                    </td>
                </tr>
                <tr>
                    <td></td>
                </tr>
                <tr>
                    <td></td>
                </tr>
                <tr style="margin-bottom: 20px">
                    <td style="float:right">User Name:&nbsp;</td>
                    <td>
                        <input type="text" id="uName" name="uName" style="width:125%">
                    </td>
                </tr>
                <tr>
                    <td></td>
                </tr>
                <tr>
                    <td></td>
                </tr>
                <tr style="margin-bottom: 20px">
                    <td style="float:right">Password:&nbsp;</td>
                    <td>
                        <input type="password" id="hppass" style="width:125%">
                    </td>
                </tr>
                <tr>
                    <td></td>
                </tr>
                <tr>
                    <td></td>
                </tr>
                <tr style="margin-bottom: 20px">
                    <td style="float:right">Domain:&nbsp;</td>
                    <td>
                        <input type="text" id="hpdomain" style="width:125%">
                    </td>
                </tr>
                <tr>
                    <td></td>
                </tr>
                <tr>
                    <td></td>
                </tr>
                <tr style="margin-bottom: 20px">
                    <td style="float:right">Project:&nbsp;</td>
                    <td>
                        <input type="text" id="hpproject" style="width:125%">
                    </td>
                </tr>
            </table>
        </div>
        <table align="center">
            <tr>
                <td>
                    <div id="footer-modal">
                        <input id="HpQCLogin" type="button" value="Connect" style="float: right;margin-top:10px;">
                    </div>
                </td>
                <td>
                    <div id="footer-modal">
                        <input id="HpQCCancel" type="button" value="Cancel" style="float: right;margin-top:10px;">
                    </div>
                </td>
            </tr>
        </table>
    </div>

    <div id="createDomainAndProjectModal" style="display: none;">
        <div id="header-modal">
            <span>Select Domain and Project</span>
            <a href="#" id="close-modal">CLOSE</a>
        </div>
        <div id="body-modal">
            <table>
                <tr>
                    <td style="float:right">Domain:&nbsp;</td>
                    <td>
                        <select id="domainId" name="domainName" style="width:100%"></select>
                    </td>
                </tr>
                <tr>
                    <td style="float:right">Project:&nbsp;</td>
                    <td>
                        <select id="prjctId" name="prjName" style="width:100%"></select>
                    </td>
                </tr>
            </table>
        </div>
        <div id="footer-modal">
            <input id="exportTestcaseButton" type="button" value="Export" style="float: right;margin-top:10px;">
        </div>
    </div>


    <!--End -->
    <!--Second Popup white creating version -->
    <button id="modal-launcher" hidden="true">Launch Modal Window</button>
    <!--<div id="modal-background"></div>
<div id="modal-content">
<select id="select_model_tocopy">
    <option>Select Model</option>
</select>
<select id="select_version_tocopy">
    <option>Select Version</option>
</select>
<div class="YesNobtn">
<button id="modal-yes">Yes</button>
<button id="modal-close">No</button>
</div>
</div>-->
    <!--End -->

    <div id="modal-content-version" style="display: none;" align="center">
        <div id="header-modal" align="left">
            <span>Select Model Version</span>
        </div>
       
       
        <div id="body-modal">
           
            <table>
                <tr>
                    <td>
                        <select id="select_model_tocopy">
                            <option value="">Select Model</option>
                        </select>
                    </td>
                    <td>
                        <select id="select_version_tocopy" style="width:100%">
                            <option  value="">Select Version</option>
                        </select>
                    </td>
                </tr>
            </table>
        </div>
        <table>
            <tr>
                <td>
                    <div id="footer-modal">
                        <input id="modal-yes" type="button" value="Ok">
                    </div>
                </td>
                <td>
                    <div id="footer-modal">
                        <input id="modal-close" type="button" value="Cancel">
                    </div>
                </td>
            </tr>
        </table>
    
    </div>



    <link rel="stylesheet" href="app/app.css" type="text/css" />
    <!-- Rappid/JointJS dependencies: -->

    <script src="package/jquery/dist/jquery.js"></script>
    <script src="package/lodash/index.js"></script>
    <script src="package/backbone/backbone.js"></script>
    <script src="package/graphlib/dist/graphlib.core.js"></script>
    <script src="package/dagre/dist/dagre.core.js"></script>
    <script src="build/rappid.min.js"></script>
    <script type="text/javascript" src="jquery/datatable/js/jquery.dataTables.min.js"></script>
    <link rel="stylesheet" type="text/css" href="jquery/datatable/css/jquery.dataTables.min.css" />
    <!--<script type="text/javascript" src="./js/tableExport.js"></script>
<script type="text/javascript" src="./js/jquery.base64.js"></script>
<script type="text/javascript" src="./js/base64.js"></script>-->
<script src="jquery/i18n/jquery.i18n.js"></script>
<script src="jquery/i18n/jquery.i18n.messagestore.js"></script>
<script src="jquery/i18n/jquery.i18n.fallbacks.js"></script>
<script src="jquery/i18n/jquery.i18n.language.js"></script>
<script src="jquery/i18n/jquery.i18n.parser.js"></script>
<script src="jquery/i18n/jquery.i18n.emitter.js"></script>
<script src="jquery/i18n/jquery.i18n.emitter.bidi.js"></script>
<script src="jquery/i18n/url.min.js"></script>
<script src="js/scenarioFunctions.js"></script>
<script src="js/home.js"></script>
<script src="js/opentest_ui.js"></script>
<script>
    var locale_global=url('?locale');
    if(locale_global== undefined || locale_global==''){
        locale_global='en';
    } 
</script>

<link rel="stylesheet" type="text/css" href="css/style.css">


    <!--[if IE 9]>
<script>
	// `-ms-user-select: none` doesn't work in IE9
	document.onselectstart = function() { return false; };
</script>
<![endif]-->

    <!-- Application files:  -->
    <!--<script src="js/config/halo.js"></script>-->
    <script src="js/config/selection.js"></script>
    <script>
        var fileref=document.createElement('script');
        fileref.setAttribute("type","text/javascript");
        fileref.setAttribute("src", "js/config/inspector_"+locale_global+".js");
        document.getElementsByTagName("body")[0].appendChild(fileref)
        fileref=document.createElement('script');
        fileref.setAttribute("type","text/javascript");
        fileref.setAttribute("src", "js/config/halo_"+locale_global+".js");
        document.getElementsByTagName("body")[0].appendChild(fileref)
    </script>
    <script src="js/config/stencil.js"></script>
    <script src="js/config/toolbar.js"></script>
    <script src="js/config/sample-graphs.js"></script>
    <script src="js/views/main.js"></script>
    <script src="js/views/theme-picker.js"></script>
    <script src="js/models/joint.shapes.app.js"></script>
    <script src="js/models/FileSaver.js"></script>
    <script src="app/validation.js"></script>
    <script src="app/app.js"></script>
    <script type="text/javascript" src="js/views/jquery.dialog.js"></script>
    <link rel="stylesheet" type="text/css" href="css/dialog.css" />
    <script src="app/dynamic_row.js"></script>
    <!--<script src="app/jquery.table2excel.js" ></script>-->
    <script src="app/combobox_autoPopulate.js"></script>
    <script src="dist/jstree.js"></script>



    <!--<script src="http://ajax.aspnetcdn.com/ajax/modernizr/modernizr-2.8.3.js"></script>-->
    <script type="text/javascript" src="js/jquery-ui.min-1.11.1.js"></script>
    <script type="text/javascript" src="js/igniteui/2017.1/infragistics.core.js"></script>
    <script type="text/javascript" src="js/igniteui/2017.1/infragistics.lob.js"></script>
    <script type="text/javascript" src="js/igniteui/2017.1/modules/infragistics.ext_core.js"></script>
    <script type="text/javascript" src="js/igniteui/2017.1/modules/infragistics.ext_collections.js"></script>
    <script type="text/javascript" src="js/igniteui/2017.1/modules/infragistics.ext_text.js"></script>
    <script type="text/javascript" src="js/igniteui/2017.1/modules/infragistics.ext_io.js"></script>
    <script type="text/javascript" src="js/igniteui/2017.1/modules/infragistics.ext_ui.js"></script>
    <script type="text/javascript" src="js/igniteui/2017.1/modules/infragistics.documents.core_core.js"></script>
    <script type="text/javascript" src="js/igniteui/2017.1/modules/infragistics.ext_collectionsextended.js"></script>
    <script type="text/javascript" src="js/igniteui/2017.1/modules/infragistics.excel_core.js"></script>
    <script type="text/javascript" src="js/igniteui/2017.1/modules/infragistics.ext_threading.js"></script>
    <script type="text/javascript" src="js/igniteui/2017.1/modules/infragistics.ext_web.js"></script>
    <script type="text/javascript" src="js/igniteui/2017.1/modules/infragistics.xml.js"></script>
    <script type="text/javascript" src="js/igniteui/2017.1/modules/infragistics.documents.core_openxml.js"></script>
    <script type="text/javascript" src="js/igniteui/2017.1/modules/infragistics.excel_serialization_openxml.js"></script>
    <script>    
        var currentSelectedNode = {};
        var totalnumberofnodes = 0;
        var currentblogdaigram;
        var rCount;
        var isTestSuite = false;
        var isscenariotab = false;
        var currentTab = '';
        var timeInclear;
        var isAutoSave = false;
        var fromPath = '';
        var isVersionPublished = false;
        var isScenarioSelected = false;
        var isNodeSelected = false;
        joint.setTheme('material');
        app = new App.MainView({ el: '#app' });
        themePicker = new App.ThemePicker({ mainView: app });

        app.graph.on('all', function (eventName, cell) {
          
            if (eventName === 'add' || eventName === 'remove' || eventName === 'change:attrs') {

                var cellJsonStr = JSON.stringify(cell);
                var cellJson = JSON.parse(cellJsonStr);
                if (eventName === 'add') {

                    if (cellJson.type === "erd.Entity" || cellJson.type === "erd.Relationship" || cellJson.type === "app.RectangularModel" || cellJson.type === "basic.Path"
                        || cellJson.type === "bpmn.Gateway" || cellJson.type === "bpmn.DataObject" || cellJson.type === "bpmn.Conversation"
                        || cellJson.type === "bpmn.Message" || cellJson.type === "bpmn.Group" || cellJson.type === "bpmn.Activity" || cellJson.type === "bpmn.Annotation" || cellJson.type === "bpmn.Choreography" ) {
                        cell.resize(80, 40);
                    }else if (cellJson.type === "bpmn.Event"){
                        cell.resize(40, 40);
                    }
                }
                if (!isTestSuite) {
                   
                    if (!$('#btn-png-scenario1').hasClass("icon-btn-disable")) {
                        $('#btn-png-scenario1').addClass('icon-btn-disable');
                        $('#btn-validate').removeClass('icon-btn-disable');
                    } if ($('#btn-png-save').hasClass("icon-btn-disable")) {
                        $('#btn-png-save').removeClass('icon-btn-disable');
                        $('#btn-validate').removeClass('icon-btn-disable');
                    } if (!$('#btn-publish-version').hasClass("icon-btn-disable")) {
                        $('#btn-publish-version').addClass('icon-btn-disable');
                        $('#btn-validate').removeClass('icon-btn-disable');
                    }
                    if (eventName === 'add' || eventName === 'remove') {
                        fromPath = '';
                    }
                    if (!isAutoSave && fromPath != 'Scenario Table' && !isVersionPublished) {
                        enableAutoSaveModel();
                    }
                }
                if (isVersionPublished) {
                    $('#btn-publish-version').addClass('icon-btn-disable');
                    $('#btn-validate').addClass('icon-btn-disable');
                    $('#btn-png-scenario1').addClass('icon-btn-disable');
                    $('#btn-png-save').addClass('icon-btn-disable');
                }
            }

        });

        function enableAutoSaveModel() {
            isAutoSave = true;
            timeInclear = setInterval(function () {
                autosaveVersion();
            }, 300000);
        }


        app.paper.on('cell:pointerdown',
            function (cellView, evt, x, y) {
                if (isTestSuite) {
                    $("a[data-prop='node_trace']").click();
                    renderNodeTraciability(cellView.model);
                    currentTab == '';
                } else {
                    isNodeSelected = true;
                    if(isNodeSelected == true && isScenarioSelected == false){
                    $("#scenarioTab").addClass('icon-btn-disable');
                    $("#TestConditions").removeClass('icon-btn-disable');
                  } 
                    //$("#TestCondition").removeClass('icon-btn-disable');
                    if (currentTab == '' || currentTab == 'TestCondition') {
                        
                        renderTestCondition(cellView.model);

                    } else {

                        renderNodeTraciability(cellView.model);
                    }
                }
                if (cellView.model.isLink()) {
                    closeBottomToolbar();
                }
            }


        );

        //app.graph.on('change:position', function() { alert('element moved') })



        var openFile = function (event) {
            var input = event.target;

            var reader = new FileReader();
            reader.onload = function () {
                var text = reader.result;
                app.graph.fromJSON(JSON.parse(text));
                // alert("Successfully loaded");
                $(".scenario").click();
                // console.log(text);
                //console.log(reader.result.substring(0, 200));
            };
            reader.readAsText(input.files[0]);
        };

        $(".scenario").click(function () {
            //generate scenarios from graph
            $('#btn-png-scenario1').addClass('icon-btn-disable');
            $('#bodyoverlay').addClass('overlay');
            $("#modal-bg").addClass('bgopacity');
            window.setTimeout( function(){
                compileGraph(function () {
                    saveVersion(function () {
                        $('#bodyoverlay').removeClass('overlay');
                        $("#modal-bg").removeClass('bgopacity');
                        $("#sceDet_Type").val("0");
                        generateScenarios('toolbar', app.graph);
                        $('.scenarioContainer').show();
                    });
                });
            } ,1);
        });



        //$("#btn-png-load").click(function(){
        //joint.storage.Local.insert('mygraphs', app.graph);
        //var input = $(document.createElement('input'));
        //input.attr("type", "file");
        // $('#fileinput').click(); // opening dialog
        // return false;
        //app.graph.fromJSON(JSON.parse(localStorage.getItem('json')))




        // alert("Successfully loaded");
        // });

        $(document).on("click", "#requirementTable a", function () {
                var issueid = $(this).attr("id")
                var project_id = currentSelectedNode.parents[3].substring(currentSelectedNode.parents[3].indexOf('_') + 1, currentSelectedNode.parents[3].length);
                var issueData = { fileAdd: "GRI", issue_id: issueid, project_id: project_id };
                sendAJAX(issueData, app_server_url, function (issueData) {
                    if (issueData.code == "200") {
                        displayRequirementPage(issueData.data, project_id);
                    } else {
                        dailogmsg(issueData.data);
                    }
                });
            });

        $("#btn-publish-version").click(function () {
            /* if(confirm("Are you sure you want to publish this version?")){*/
            $('#bodyoverlay').addClass('overlay');
            $("#modal-bg").addClass('bgopacity');
            window.setTimeout( function(){
                compileGraph(function () {
                    saveVersion(function () {
                        var currentNode = (currentSelectedNode.id).split("_")[0];
                        var versionId = (currentSelectedNode.id).split("_")[1];
                        if (currentNode == "version") {
                            var json = JSON.stringify(app.graph);
                            var data = { fileAdd: "SGVD", blobData: json, versionId: versionId, publish: true };
                            sendAJAX(data, app_server_url, function (data) {
                                currentblogdaigram = JSON.parse(json);
                                $('#jstree_demo').jstree(true).get_node(currentSelectedNode.id).original.diag = currentblogdaigram;
                                $('#jstree_demo').jstree(true).get_node('tesu_' + currentSelectedNode.id).original.diag = currentblogdaigram;
                                app.graph.fromJSON(currentblogdaigram);
                                //generateScenarios('', app.graph);
                                $('#bodyoverlay').removeClass('overlay');
                                $("#modal-bg").removeClass('bgopacity');
                                setTimeout(function () { dailogmsg("Published successfully"); }, 1000);
                                $('#btn-publish-version').addClass('icon-btn-disable');
                                actionsOnPublishedModel();
                            });
                        } else {
                            dailogmsg("Please select the version which you want to publish.");
                        }

                    });
                });
            } ,1);
            /* }*/
        });




        $("#btn-png-save").click(function () {           
            $('#bodyoverlay').addClass('overlay');
            $("#modal-bg").addClass('bgopacity');
            /* if(confirm("Are you sure you want to save?")){*/
                window.setTimeout( function(){saveVersion()} ,1);
            /*compileGraph(function(){
               
            }); */
            /* }*/
        });

        function saveVersion(cb) {
            //joint.storage.Local.insert('mygraphs', app.graph);
            var json = JSON.stringify(app.graph);
            var versionId = (currentSelectedNode.id).split("_")[1];
            //localStorage.setItem('json', json);
            // alert("Successfully saved");

            // var filename=prompt("Please enter file name");
            // if (filename!=null){
            //var blob = new Blob([text], {type: "text/plain;charset=utf-8"});
            //saveAs(blob, filename+".txt");
            // }
            var currentNode = (currentSelectedNode.id).split("_")[0];
            isAutoSave = false;
            clearInterval(timeInclear);
            if (currentNode == "version") {
                var jsonCells = JSON.parse(json)
                $.each(jsonCells.cells, function (index, cell) {
                    try {
                        delete cell.attrs['rect'];
                        delete cell.attrs['.connection'];
                        delete cell.attrs['.marker-source'];
                        delete cell.attrs['.marker-target'];
                        delete cell.attrs['polygon'];
                        if (cell.type == 'fsa.StartState') {
                            cell.attrs['circle'].fill = '#61549C';
                        } else if (cell.type == 'fsa.State') {
                            cell.attrs['circle'].fill = '#FF0000';
                        } else {
                            delete cell.attrs['circle'];
                        }
                        if ($('#scenariosTable') != undefined && $('#scenariosTable tr') != undefined) {
                            $('#scenariosTable tr').removeClass('liActive');
                        }
                    } catch (err) { };
                });
                json = JSON.stringify(jsonCells);
                var data = { fileAdd: "SGVD", blobData: json, versionId: versionId };
                sendAJAX(data, app_server_url, function (data) {
                    currentblogdaigram = JSON.parse(json);
                    $('#jstree_demo').jstree(true).get_node(currentSelectedNode.id).original.diag = currentblogdaigram;
                    $('#jstree_demo').jstree(true).get_node('tesu_' + currentSelectedNode.id).original.diag = currentblogdaigram;
                    app.graph.fromJSON(currentblogdaigram);
                    /*copyObject={
                                clonedNodes:{},
                                copyNodes:[],
                                pastedNodes:[]
                            };*/
                    if (cb) {
                        cb();
                    } else {
                        $('#bodyoverlay').removeClass('overlay');
                        $("#modal-bg").removeClass('bgopacity');
                        //generateScenarios('', app.graph);
                        dailogmsg(labelObj.savedMsg);

                        //compileGraph(function(){generateScenarios('toolbar',app.graph)});

                        $('#btn-validate').removeClass('icon-btn-disable');
                        $('#btn-png-save').removeClass('icon-btn-disable');
                        $('#btn-png-scenario1').removeClass('icon-btn-disable');
                    }
                    //loadJSTree('onUpdate');                  
                    displayNodeCount(app.graph);
                });
            } else {
                dailogmsg("Please select the version which you want to update.");
            }

        }

        function autosaveVersion() {
            if (isAutoSave) {
                dailogmsgautosave("Auto saving diagram...");
                saveVersion(function () {
                    setTimeout(function () {
                        $('#bodyoverlay').removeClass('bgopacity');
                        $("#modal-bg").removeClass('bgopacity');
                        $("#createalertmodalpopupsave").remove();
                    }, 1000);
                    clearInterval(timeInclear);
                    isAutoSave = false;
                });
            }
        }

        $("#btn-rev-eng").click(function () {
            try {
                var selectedNode = (currentSelectedNode.id).split("_");
                var currentNode = selectedNode[0];
                var versionId = selectedNode[1]
                if (currentNode == "version") {
                    localStorage.setItem("ver", $('#jstree_demo').jstree('get_selected'));
                    window.location.href = app_server_url + "/pages/revEng.html?vId=" + versionId+"&locale="+locale_global;
                } else {
                    dailogmsg(labelObj.revCreateError1 + currentNode + "."+ labelObj.revCreateError2);
                }
            } catch (err) {
                dailogmsg(labelObj.revCreateError);
            }
            //dailogmsg("Implementation in progress. Will be available shortly");
        });
        $("#btn-validate").click(function () {
            var valid = 1;
            compileGraph(valid);
        });
        function compileGraph(cb) {
            compileStartingEndingPointA(function (errors, result) {              
                compileOutboundsA(errors, result, function (errors1, result1) {
                    compileAllLinksA(errors1, result1, function (errors2, result2) {
                        if (result2) {
                            if (cb == 1) {
                                setTimeout(function () {
                                    $('#bodyoverlay').removeClass('overlay');
                                    $("#modal-bg").removeClass('bgopacity');
                                }, 500);
                                setTimeout(function () { dailogmsg(labelObj.validateMsg); }, 600);
                                $('#btn-validate').addClass('icon-btn-disable');
                                $('#btn-png-save').removeClass('icon-btn-disable');
                                $('#btn-png-scenario1').removeClass('icon-btn-disable');
                            }
                            else if (cb) { cb(); }
                            $(".errorList").empty();
                            closeBottomToolbar();
                        } else {
                            setTimeout(function () {
                                $('#bodyoverlay').removeClass('overlay');
                                $("#modal-bg").removeClass('bgopacity');
                            }, 1000);
                            setTimeout(function () {
                                $(".errorList").html(errors2);
                            }, 2000);
                            openBottomToolbar();
                            $("a[data-prop='problems']").click(); //value 'problems' will be changed according to the requirement
                        }

                    });
                });
            });
        }
        function compileStartingEndingPoint(cb) {
            var allNodes = app.graph.getElements();
            var totalSources = 0;
            var sinkNodes = 0; //nodes which do not have any input or output
            var endNodeExist = false;
            if (allNodes.length > 0) {
                for (var i = 0; i < allNodes.length; i++) {
                    if (allNodes[i].attributes.type == "fsa.StartState") {
                        if (app.graph.isSource(allNodes[i])) {
                            totalSources++;
                        }

                        if (app.graph.isSink(allNodes[i])) {

                            sinkNodes++;
                        }
                    }
                    if (allNodes[i].attributes.type == "fsa.EndState") {

                        endNodeExist = true;
                    }


                }
                if (totalSources == 1) {
                    if (sinkNodes > 0) {
                        dailogmsg(labelObj.nodeWithoutConnectivity);
                    } else {
                        //alert("Compiled successfully !!! Only one start point");
                        if (endNodeExist) {
                            if (cb) {
                                cb();
                            }
                        } else {
                            dailogmsg(lableObj.endNode);
                        }
                    }

                } else if (totalSources == 0) {
                    dailogmsg(labelObj.recheckGraph);
                } else {
                    dailogmsg(labelObj.multipleStartStates);
                }
            } else {
                dailogmsg(labelObj.nothingValidate);
            }
        }

        function compileOutbounds(cb) {
            var allNodes = app.graph.getElements();
            var valid = true;


            for (var i = 0; i < allNodes.length; i++) {
                if (allNodes[i].attributes.type == "fsa.StartState") {
                    var outbounds = app.graph.getNeighbors(allNodes[i], { outbound: true });
                    if (outbounds.length > 1) {
                        valid = false;
                        dailogmsg("ERROR !!! Only one outward connection is allowed for STATE nodes");
                        break;
                    }
                    if (app.graph.isSource(allNodes[i])) {
                        var inbounds = app.graph.getNeighbors(allNodes[i], { inbound: true });
                        if (inbounds.length > 0) {
                            valid = false;
                            dailogmsg("ERROR !!! Starting node can't have any inbound links");
                            break;
                        }
                    } else {
                        var inbounds = app.graph.getNeighbors(allNodes[i], { inbound: true });
                        if (inbounds.length == 0) {
                            valid = false;
                            dailogmsg("ERROR !!! State node must have atleast one inbound link");
                            break;
                        }
                    }

                } else if (allNodes[i].attributes.type == "fsa.EndState") {
                    var outbounds = app.graph.getNeighbors(allNodes[i], { outbound: true });
                    var inbounds = app.graph.getNeighbors(allNodes[i], { inbound: true });
                    if (outbounds.length > 0) {
                        valid = false;
                        dailogmsg(labelObj.endOutbound);
                        break;
                    }
                    if (inbounds.length == 0) {
                        valid = false;
                        dailogmsg(labelObj.endInbound);
                        break;
                    }
                } else if (allNodes[i].attributes.type == "erd.Entity") {
                    var outbounds = app.graph.getNeighbors(allNodes[i], { outbound: true });
                    var inbounds = app.graph.getNeighbors(allNodes[i], { inbound: true });
                    if (outbounds.length == 0) {
                        valid = false;
                        dailogmsg("ERROR !!! ENTITY node must have atleast one outbound link");
                        break;
                    }
                    if (inbounds.length == 0) {
                        valid = false;
                        dailogmsg("ERROR !!! ENTITY node must have atleast one inbound link");
                        break;
                    }
                } else if (allNodes[i].attributes.type == "erd.Normal") {
                    var outbounds = app.graph.getNeighbors(allNodes[i], { outbound: true });
                    var inbounds = app.graph.getNeighbors(allNodes[i], { inbound: true });
                    if (outbounds.length == 0) {
                        valid = false;
                        dailogmsg("ERROR !!! NORMAL node must have atleast one outbound link");
                        break;
                    }
                    if (inbounds.length == 0) {
                        valid = false;
                        dailogmsg("ERROR !!! NORMAL node must have atleast one inbound link");
                        break;
                    }
                } else if (allNodes[i].attributes.type == "erd.Relationship") {
                    var outbounds = app.graph.getNeighbors(allNodes[i], { outbound: true });
                    var inbounds = app.graph.getNeighbors(allNodes[i], { inbound: true });
                    if (outbounds.length == 0) {
                        valid = false;
                        dailogmsg("ERROR !!! RELATIONSHIP node must have atleast one outbound link");
                        break;
                    }
                    if (inbounds.length == 0) {
                        valid = false;
                        dailogmsg("ERROR !!! RELATIONSHIP node must have atleast one inbound link");
                        break;
                    }
                }



                if (i == allNodes.length - 1) {
                    if (valid == true && cb) {
                        cb();
                    }
                }

            }


        }

        function compileAllLinks(cb) {
            var valid = true;
            var allLinks = app.graph.getLinks();
            var totalSources = 0;
            for (var i = 0; i < allLinks.length; i++) {

                if (!allLinks[i].getSourceElement()) {
                    valid = false;
                    dailogmsg(labelObj.linkSource);
                    break;
                }
                if (!allLinks[i].getTargetElement()) {
                    valid = false;
                    dailogmsg(labelObj.linkTarget);
                    break;
                }
                if (i == allLinks.length - 1) {
                    if (valid == true && cb) {
                        cb();
                    }
                }
            }
        }

        //validation erros in one shot start
        function compileStartingEndingPointA(cb) {
            var errors = '';
            var result = true;
            var allNodes = app.graph.getElements();
            var totalSources = 0;
            var sinkNodes = 0; //nodes which do not have any input or output
            var endNodeExist = false;
            if (allNodes.length > 0) {
                $('#bodyoverlay').addClass('overlay');
                $("#modal-bg").addClass('bgopacity');
                for (var i = 0; i < allNodes.length; i++) {
                    if (allNodes[i].attributes.type == "fsa.StartState") {
                        if (app.graph.isSource(allNodes[i])) {
                            totalSources++;
                        }

                        if (app.graph.isSink(allNodes[i])) {

                            sinkNodes++;
                        }
                    }
                    if (allNodes[i].attributes.type == "fsa.EndState") {

                        endNodeExist = true;
                    }


                }
                if (totalSources == 1) {
                    if (sinkNodes > 0) {
                        errors += "<li>Some node(s) are without any connectivity. Please remove them.</li>";
                        if (result) {
                            result = false;
                        }
                        cb(errors, result);
                        //alert("Some node(s) are without any connectivity. Please remove them.");
                    } else {
                        //alert("Compiled successfully !!! Only one start point");
                        if (endNodeExist) {
                            if (cb) {
                                cb(errors, result);
                            }
                        } else {
                            errors += "<li>"+labelObj.endNode+"</li>";
                            if (result) {
                                result = false;
                            }
                            cb(errors, result);
                            //alert("ERROR !!! Can't find end node in graph");
                        }
                    }

                } else if (totalSources == 0) {
                    //alert("Please recheck the graph because it does not have any start state");
                    errors += "<li>"+labelObj.recheckGraph+"</li>";
                    if (result) {
                        result = false;
                    }
                    cb(errors, result);
                } else {
                    //alert("ERROR !!! Looks like there are multiple starting states. Maximum one is allowed");
                    errors += "<li>"+labelObj.multipleStartStates+"</li>";
                    if (result) {
                        result = false;
                    }
                    cb(errors, result);
                }
            } else {
                //alert("ERROR !!! There is nothing to validate");
                errors += "<li>"+labelObj.nothingValidate+"</li>";
                if (result) {
                    result = false;
                }
                cb(errors, result);
            }
        }


        var previousindex;
        function compileOutboundsA(errors, result, cb) {
            var allNodes = app.graph.getElements();
            var valid = true;
            if (allNodes.length > 0) {
                for (var i = 0; i < allNodes.length; i++) {
                    var elementView = app.paper.findViewByModel(allNodes[i]);
                    elementView.unhighlight(null);
               
                    if (allNodes[i].attributes.type == "bpmn.Gateway") {
                        var outbounds = app.graph.getNeighbors(allNodes[i], { outbound: true });
                        var inbounds = app.graph.getNeighbors(allNodes[i], { inbound: true });
                        if (outbounds.length == 0) {
                            valid = false;
                            //alert("ERROR !!! ENTITY node must have atleast one outbound link");
                            //break;
                            errors += "<li onclick='return mynodehighlight(" + i + ");'>ERROR !!! Gateway node must have atleast one outbound link</li>";
                            if (result) {
                                result = false;
                            }
                            //cb(errors,result);
                        } /*else if (outbounds.length > 1) {
                            valid = false;
                            errors += "<li onclick='return mynodehighlight(" + i + ");'>ERROR !!! Gateway node must have only one outbound link</li>";
                            if (result) {
                                result = false;
                            }
                        }*/
                        if (inbounds.length == 0) {
                            valid = false;
                            //alert("ERROR !!! ENTITY node must have atleast one inbound link");
                            //break;
                            errors += "<li><a onclick='return mynodehighlight(" + i + ");'>ERROR !!! Gateway node must have atleast one inbound link</a></li>";
                            if (result) {
                                result = false;
                            }
                            //cb(errors,result);
                        } /*else if (inbounds.length > 1) {
                            valid = false;
                            errors += "<li onclick='return mynodehighlight(" + i + ");'>ERROR !!! Gateway node must have only one inbound link</li>";
                            if (result) {
                                result = false;
                            }
                        }*/
                    }else if (allNodes[i].attributes.type == "bpmn.Event") {
                        if(allNodes[i].eventType != 'start'){
                            var inbounds = app.graph.getNeighbors(allNodes[i], { inbound: true });
                            if (inbounds.length == 0) {
                                valid = false;                           
                                errors += "<li onclick='return mynodehighlight(" + i + ");'>ERROR !!! Event node must have atleast one inbound link</li>";
                                if (result) {
                                    result = false;
                                }
                                //cb(errors,result);
                            } 
                            else if (inbounds.length > 1) {
                                valid = false;
                                //alert("ERROR !!! ENTITY node must have atleast one inbound link");
                                //break;
                                errors += "<li onclick='return mynodehighlight(" + i + ");'>ERROR !!! Event node must have atleast one inbound link</li>";
                                if (result) {
                                    result = false;
                                }
                                //cb(errors,result);
                            } 
                        }  else{      
                            var outbounds = app.graph.getNeighbors(allNodes[i], { outbound: true });
                            if (outbounds.length == 0) {
                                valid = false;
                                //alert("ERROR !!! ENTITY node must have atleast one outbound link");
                                //break;
                                errors += "<li onclick='return mynodehighlight(" + i + ");'>ERROR !!! Event node must have atleast one outbound link</li>";
                                if (result) {
                                    result = false;
                                }
                            //cb(errors,result);
                            } else if (outbounds.length > 1) {
                                valid = false;
                                //alert("ERROR !!! ENTITY node must have atleast one outbound link");
                                //break;
                                errors += "<li onclick='return mynodehighlight(" + i + ");'>ERROR !!! Event node must have only one outbound link</li>";
                                if (result) {
                                    result = false;
                                }
                                //cb(errors,result);
                            }
                        }
                    }else if (allNodes[i].attributes.type == "bpmn.Activity") {
                        var outbounds = app.graph.getNeighbors(allNodes[i], { outbound: true });
                        var inbounds = app.graph.getNeighbors(allNodes[i], { inbound: true });
                        if (outbounds.length == 0) {
                            valid = false;
                            //alert("ERROR !!! ENTITY node must have atleast one outbound link");
                            //break;
                            errors += "<li onclick='return mynodehighlight(" + i + ");'>ERROR !!! Activity node must have atleast one outbound link</li>";
                            if (result) {
                                result = false;
                            }
                            //cb(errors,result);
                        }/* else if (outbounds.length > 1) {
                            valid = false;
                            //alert("ERROR !!! ENTITY node must have atleast one outbound link");
                            //break;
                            errors += "<li onclick='return mynodehighlight(" + i + ");'>ERROR !!! Activity node must have only one outbound link</li>";
                            if (result) {
                                result = false;
                            }
                            //cb(errors,result);
                        }*/
                        if (inbounds.length == 0) {
                            valid = false;
                            errors += "<li><a onclick='return mynodehighlight(" + i + ");'>ERROR !!! Activity node must have atleast one inbound link</a></li>";
                            if (result) {
                                result = false;
                            }
                        } /*else if (inbounds.length > 1) {
                            valid = false;
                            errors += "<li onclick='return mynodehighlight(" + i + ");'>ERROR !!! Activity node must have only one inbound link</li>";
                            if (result) {
                                result = false;
                            }
                        }*/
                    }else if (allNodes[i].attributes.type == "bpmn.DataObject") {
                        var outbounds = app.graph.getNeighbors(allNodes[i], { outbound: true });
                        var inbounds = app.graph.getNeighbors(allNodes[i], { inbound: true });
                        if (outbounds.length == 0) {
                            valid = false;
                            //alert("ERROR !!! ENTITY node must have atleast one outbound link");
                            //break;
                            errors += "<li onclick='return mynodehighlight(" + i + ");'>ERROR !!! DataObject node must have atleast one outbound link</li>";
                            if (result) {
                                result = false;
                            }
                            //cb(errors,result);
                        } else if (outbounds.length > 1) {
                            valid = false;
                            //alert("ERROR !!! ENTITY node must have atleast one outbound link");
                            //break;
                            errors += "<li onclick='return mynodehighlight(" + i + ");'>ERROR !!! DataObject node must have only one outbound link</li>";
                            if (result) {
                                result = false;
                            }
                            //cb(errors,result);
                        }
                        if (inbounds.length == 0) {
                            valid = false;
                            errors += "<li><a onclick='return mynodehighlight(" + i + ");'>ERROR !!! DataObject node must have atleast one inbound link</a></li>";
                            if (result) {
                                result = false;
                            }
                        } else if (inbounds.length > 1) {
                            valid = false;
                            errors += "<li onclick='return mynodehighlight(" + i + ");'>ERROR !!! DataObject node must have only one inbound link</li>";
                            if (result) {
                                result = false;
                            }
                        }
                    }else if (allNodes[i].attributes.type == "bpmn.Conversation") {
                        var outbounds = app.graph.getNeighbors(allNodes[i], { outbound: true });
                        var inbounds = app.graph.getNeighbors(allNodes[i], { inbound: true });
                        if (outbounds.length == 0) {
                            valid = false;
                            //alert("ERROR !!! ENTITY node must have atleast one outbound link");
                            //break;
                            errors += "<li onclick='return mynodehighlight(" + i + ");'>ERROR !!! Conversation node must have atleast one outbound link</li>";
                            if (result) {
                                result = false;
                            }
                            //cb(errors,result);
                        } else if (outbounds.length > 1) {
                            valid = false;
                            //alert("ERROR !!! ENTITY node must have atleast one outbound link");
                            //break;
                            errors += "<li onclick='return mynodehighlight(" + i + ");'>ERROR !!! Conversation node must have only one outbound link</li>";
                            if (result) {
                                result = false;
                            }
                            //cb(errors,result);
                        }
                        if (inbounds.length == 0) {
                            valid = false;
                            errors += "<li><a onclick='return mynodehighlight(" + i + ");'>ERROR !!! Conversation node must have atleast one inbound link</a></li>";
                            if (result) {
                                result = false;
                            }
                        } else if (inbounds.length > 1) {
                            valid = false;
                            errors += "<li onclick='return mynodehighlight(" + i + ");'>ERROR !!! Conversation node must have only one inbound link</li>";
                            if (result) {
                                result = false;
                            }
                        }
                    }else if (allNodes[i].attributes.type == "bpmn.Choreography") {
                        var outbounds = app.graph.getNeighbors(allNodes[i], { outbound: true });
                        var inbounds = app.graph.getNeighbors(allNodes[i], { inbound: true });
                        if (outbounds.length == 0) {
                            valid = false;
                            //alert("ERROR !!! ENTITY node must have atleast one outbound link");
                            //break;
                            errors += "<li onclick='return mynodehighlight(" + i + ");'>ERROR !!! Choreography node must have atleast one outbound link</li>";
                            if (result) {
                                result = false;
                            }
                            //cb(errors,result);
                        } else if (outbounds.length > 1) {
                            valid = false;
                            //alert("ERROR !!! ENTITY node must have atleast one outbound link");
                            //break;
                            errors += "<li onclick='return mynodehighlight(" + i + ");'>ERROR !!! Choreography node must have only one outbound link</li>";
                            if (result) {
                                result = false;
                            }
                            //cb(errors,result);
                        }
                        if (inbounds.length == 0) {
                            valid = false;
                            errors += "<li><a onclick='return mynodehighlight(" + i + ");'>ERROR !!! Choreography node must have atleast one inbound link</a></li>";
                            if (result) {
                                result = false;
                            }
                        } else if (inbounds.length > 1) {
                            valid = false;
                            errors += "<li onclick='return mynodehighlight(" + i + ");'>ERROR !!! Choreography node must have only one inbound link</li>";
                            if (result) {
                                result = false;
                            }
                        }
                    }else if (allNodes[i].attributes.type == "bpmn.Message") {
                        var outbounds = app.graph.getNeighbors(allNodes[i], { outbound: true });
                        var inbounds = app.graph.getNeighbors(allNodes[i], { inbound: true });
                        if (outbounds.length == 0) {
                            valid = false;
                            //alert("ERROR !!! ENTITY node must have atleast one outbound link");
                            //break;
                            errors += "<li onclick='return mynodehighlight(" + i + ");'>ERROR !!! Message node must have atleast one outbound link</li>";
                            if (result) {
                                result = false;
                            }
                            //cb(errors,result);
                        } else if (outbounds.length > 1) {
                            valid = false;
                            //alert("ERROR !!! ENTITY node must have atleast one outbound link");
                            //break;
                            errors += "<li onclick='return mynodehighlight(" + i + ");'>ERROR !!! Message node must have only one outbound link</li>";
                            if (result) {
                                result = false;
                            }
                            //cb(errors,result);
                        }
                        if (inbounds.length == 0) {
                            valid = false;
                            errors += "<li><a onclick='return mynodehighlight(" + i + ");'>ERROR !!! Message node must have atleast one inbound link</a></li>";
                            if (result) {
                                result = false;
                            }
                        } else if (inbounds.length > 1) {
                            valid = false;
                            errors += "<li onclick='return mynodehighlight(" + i + ");'>ERROR !!! Message node must have only one inbound link</li>";
                            if (result) {
                                result = false;
                            }
                        }
                    }else if (allNodes[i].attributes.type == "bpmn.Annotation") {
                        var outbounds = app.graph.getNeighbors(allNodes[i], { outbound: true });
                        var inbounds = app.graph.getNeighbors(allNodes[i], { inbound: true });
                        if (outbounds.length == 0) {
                            valid = false;
                            //alert("ERROR !!! ENTITY node must have atleast one outbound link");
                            //break;
                            errors += "<li onclick='return mynodehighlight(" + i + ");'>ERROR !!! Annotation node must have atleast one outbound link</li>";
                            if (result) {
                                result = false;
                            }
                            //cb(errors,result);
                        } else if (outbounds.length > 1) {
                            valid = false;
                            //alert("ERROR !!! ENTITY node must have atleast one outbound link");
                            //break;
                            errors += "<li onclick='return mynodehighlight(" + i + ");'>ERROR !!! Annotation node must have only one outbound link</li>";
                            if (result) {
                                result = false;
                            }
                            //cb(errors,result);
                        }
                        if (inbounds.length == 0) {
                            valid = false;
                            errors += "<li><a onclick='return mynodehighlight(" + i + ");'>ERROR !!! Annotation node must have atleast one inbound link</a></li>";
                            if (result) {
                                result = false;
                            }
                        } else if (inbounds.length > 1) {
                            valid = false;
                            errors += "<li onclick='return mynodehighlight(" + i + ");'>ERROR !!! Annotation node must have only one inbound link</li>";
                            if (result) {
                                result = false;
                            }
                        }
                    }else if (allNodes[i].attributes.type == "bpmn.Group") {
                        var outbounds = app.graph.getNeighbors(allNodes[i], { outbound: true });
                        var inbounds = app.graph.getNeighbors(allNodes[i], { inbound: true });
                        if (outbounds.length == 0) {
                            valid = false;
                            //alert("ERROR !!! ENTITY node must have atleast one outbound link");
                            //break;
                            errors += "<li onclick='return mynodehighlight(" + i + ");'>ERROR !!! Group node must have atleast one outbound link</li>";
                            if (result) {
                                result = false;
                            }
                            //cb(errors,result);
                        } else if (outbounds.length > 1) {
                            valid = false;
                            //alert("ERROR !!! ENTITY node must have atleast one outbound link");
                            //break;
                            errors += "<li onclick='return mynodehighlight(" + i + ");'>ERROR !!! Group node must have only one outbound link</li>";
                            if (result) {
                                result = false;
                            }
                            //cb(errors,result);
                        }
                        if (inbounds.length == 0) {
                            valid = false;
                            errors += "<li><a onclick='return mynodehighlight(" + i + ");'>ERROR !!! Group node must have atleast one inbound link</a></li>";
                            if (result) {
                                result = false;
                            }
                        } else if (inbounds.length > 1) {
                            valid = false;
                            errors += "<li onclick='return mynodehighlight(" + i + ");'>ERROR !!! Group node must have only one inbound link</li>";
                            if (result) {
                                result = false;
                            }
                        }
                    }else if (allNodes[i].attributes.type == "fsa.StartState") {
                        var outbounds = app.graph.getNeighbors(allNodes[i], { outbound: true });
                        if (outbounds.length > 1) {
                            valid = false;
                            //alert("ERROR !!! Only one outward connection is allowed for STATE nodes");
                            //break;
                            errors += "<li><a onclick='return mynodehighlight(" + i + ");'>"+labelObj.outwardConnection+"</a></li>";
                            if (result) {
                                result = false;
                            }
                            //cb(errors,result);
                        }
                        if (app.graph.isSource(allNodes[i])) {
                            var inbounds = app.graph.getNeighbors(allNodes[i], { inbound: true });
                            if (inbounds.length > 0) {
                                valid = false;
                                //alert("ERROR !!! Starting node can't have any inbound links");
                                //break;

                                errors += "<li onclick='return mynodehighlight(" + i + ");'>"+labelObj.startInbound+"</li>";
                                if (result) {
                                    result = false;
                                }
                                //cb(errors,result);
                            }
                        }/*else{
                        var inbounds = app.graph.getNeighbors(allNodes[i],{inbound:true});
                        if(inbounds.length == 0){
                            valid = false;
                            errors += "<li>ERROR !!! State node must have atleast one inbound link</li>";
                            if(result){
                                result = false;
                            }
                            //cb(errors,result);
                            //alert("ERROR !!! State node must have atleast one inbound link");
                            //break;
                        }
                    }*/

                    } else if (allNodes[i].attributes.type == "fsa.EndState") {
                        var outbounds = app.graph.getNeighbors(allNodes[i], { outbound: true });
                        var inbounds = app.graph.getNeighbors(allNodes[i], { inbound: true });
                        if (outbounds.length > 0) {
                            valid = false;
                            //alert("ERROR !!! END node can't have any outbound link");
                            //break;
                            errors += "<li onclick='return mynodehighlight(" + i + ");'>"+labelObj.endOutbound+"</li>";
                            if (result) {
                                result = false;
                            }
                            //cb(errors,result);
                        }
                        if (inbounds.length == 0) {
                            valid = false;
                            //alert("ERROR !!! END node must have atleast one inbound link");
                            //break;
                            errors += "<li onclick='return mynodehighlight(" + i + ");'>"+labelObj.endInbound+"</li>";
                            if (result) {
                                result = false;
                            }
                            //cb(errors,result);
                        }
                    } else if (allNodes[i].attributes.type == "fsa.State") {
                        var outbounds = app.graph.getNeighbors(allNodes[i], { outbound: true });
                        var inbounds = app.graph.getNeighbors(allNodes[i], { inbound: true });
                        /*if (allNodes[i].attributes.attrs.text.text != "Exception") {
                            valid = false;
                            errors += "<li>ERROR !!! Exception node Text can't be modified. Please change it as 'Exception' </li>";
                            if(result){
                                result = false;
                            }
                        }*/
                        if (outbounds.length > 0) {
                            valid = false;
                            errors += "<li onclick='return mynodehighlight(" + i + ");'>"+labelObj.exceptionOutbound+"</li>";
                            if (result) {
                                result = false;
                            }
                        }
                        if (inbounds.length == 0) {
                            valid = false;
                            errors += "<li onclick='return mynodehighlight(" + i + ");'>"+labelObj.exceptionInbound+"</li>";
                            if (result) {
                                result = false;
                            }
                        }
                    } else if (allNodes[i].attributes.type == "erd.Entity") {
                        var outbounds = app.graph.getNeighbors(allNodes[i], { outbound: true });
                        var inbounds = app.graph.getNeighbors(allNodes[i], { inbound: true });
                        if (outbounds.length == 0) {
                            valid = false;
                            //alert("ERROR !!! ENTITY node must have atleast one outbound link");
                            //break;
                            errors += "<li onclick='return mynodehighlight(" + i + ");'>"+ labelObj.activityOutbound+"</li>";
                            if (result) {
                                result = false;
                            }
                            //cb(errors,result);
                        } else if (outbounds.length > 1) {
                            valid = false;
                            //alert("ERROR !!! ENTITY node must have atleast one outbound link");
                            //break;
                            errors += "<li onclick='return mynodehighlight(" + i + ");'>"+labelObj.activityOneOutbound+"</li>";
                            if (result) {
                                result = false;
                            }
                            //cb(errors,result);
                        }
                        if (inbounds.length == 0) {
                            valid = false;
                            //alert("ERROR !!! ENTITY node must have atleast one inbound link");
                            //break;
                            errors += "<li><a onclick='return mynodehighlight(" + i + ");'>"+labelObj.activityAtleastInbound+"</a></li>";
                            if (result) {
                                result = false;
                            }
                            //cb(errors,result);
                        } else if (inbounds.length > 1) {
                            valid = false;
                            //alert("ERROR !!! ENTITY node must have atleast one inbound link");
                            //break;
                            errors += "<li onclick='return mynodehighlight(" + i + ");'>"+labelObj.activityOneInbound+"</li>";
                            if (result) {
                                result = false;
                            }
                            //cb(errors,result);
                        }
                    }/*else if(allNodes[i].attributes.type == "erd.Normal"){
                    var outbounds = app.graph.getNeighbors(allNodes[i],{outbound:true});
                    var inbounds = app.graph.getNeighbors(allNodes[i],{inbound:true});
                    if(outbounds.length == 0){
                        valid = false;
                        //alert("ERROR !!! NORMAL node must have atleast one outbound link");
                        //break;
                        errors += "<li>ERROR !!! NORMAL node must have atleast one outbound link</li>";
                        if(result){
                            result = false;
                        }
                        //cb(errors,result);
                    }
                    if(inbounds.length == 0){
                        valid = false;
                        //alert("ERROR !!! NORMAL node must have atleast one inbound link");
                        //break;
                        errors += "<li>ERROR !!! NORMAL node must have atleast one inbound link</li>";
                        if(result){
                            result = false;
                        }
                        //cb(errors,result);
                    }
                }*/else if (allNodes[i].attributes.type == "erd.Relationship") {
                        var outbounds = app.graph.getNeighbors(allNodes[i], { outbound: true });
                        var inbounds = app.graph.getNeighbors(allNodes[i], { inbound: true });

                        if (outbounds.length == 0) {
                            valid = false;
                            //alert("ERROR !!! RELATIONSHIP node must have atleast one outbound link");
                            //break;
                            errors += "<li><a onclick='return mynodehighlight(" + i + ");'>"+labelObj.decisionTwoOutbounds+"</a></li>";
                            if (result) {
                                result = false;
                            }
                            //cb(errors,result);
                        } else if (outbounds.length != 2) {
                            valid = false;
                            //alert("ERROR !!! RELATIONSHIP node must have atleast one outbound link");
                            //break;
                            errors += "<li><a onclick='return mynodehighlight(" + i + ");'>"+labelObj.decisionTwoOutbounds+"</a></li>";
                            if (result) {
                                result = false;
                            }
                            //cb(errors,result);
                        }
                        if (inbounds.length == 0) {
                            valid = false;
                            //alert("ERROR !!! RELATIONSHIP node must have atleast one inbound link");
                            //break;
                            errors += "<li onclick='return mynodehighlight(" + i + ");'>"+labelObj.decisiononeInbound+"</li>";
                            if (result) {
                                result = false;
                            }
                            //cb(errors,result);
                        } else if (inbounds.length > 1) {
                            valid = false;
                            //alert("ERROR !!! RELATIONSHIP node must have atleast one inbound link");
                            //break;
                            errors += "<li onclick='return mynodehighlight(" + i + ");'>"+labelObj.decisionOnlyInbound+"</li>";
                            if (result) {
                                result = false;
                            }
                            //cb(errors,result);
                        }
                    } else if (allNodes[i].attributes.type == "app.RectangularModel") {
                        var outbounds = app.graph.getNeighbors(allNodes[i], { outbound: true });
                        var inbounds = app.graph.getNeighbors(allNodes[i], { inbound: true });
                        // alert("inbounds:"+inbounds.length+"\outbounds:"+outbounds.length);
                        //alert("allNodes[i].attributes.inPorts.length :"+allNodes[i].attributes.inPorts.length +"\nallNodes[i].attributes.outPorts.length:"+allNodes[i].attributes.outPorts.length )
                        var nodeName = '';
                        if (allNodes[i].attributes.inPorts.length == 1 && allNodes[i].attributes.outPorts.length >= 2) {
                            nodeName = 'Fork Node';
                        } else if (allNodes[i].attributes.inPorts.length >= 2 && allNodes[i].attributes.outPorts.length == 1) {
                            nodeName = 'Join Node';
                        } else {
                            nodeName = '';
                        }

                        if (nodeName == 'Fork Node') {
                            if (inbounds.length != 1) {
                                valid = false;
                                //alert("ERROR !!! RELATIONSHIP node must have atleast one inbound link");
                                //break;
                                errors += "<li onclick='return mynodehighlight(" + i + ");'>"+labelObj.forkInbound+"</li>";
                                if (result) {
                                    result = false;
                                }
                                //cb(errors,result);
                            }
                            if (outbounds.length < 1) {
                                valid = false;
                                //alert("ERROR !!! RELATIONSHIP node must have atleast one outbound link");
                                //break;
                                errors += "<li onclick='return mynodehighlight(" + i + ");'>"+labelObj.forkTwoOutbounds+"</li>";
                                if (result) {
                                    result = false;
                                }
                                //cb(errors,result);
                            }
                        } else if (nodeName == 'Join Node') {
                            if (outbounds.length != 1) {
                                valid = false;
                                //alert("ERROR !!! RELATIONSHIP node must have atleast one outbound link");
                                //break;
                                errors += "<li onclick='return mynodehighlight(" + i + ");'>"+labelObj.joinOneOutbound+"</li>";
                                if (result) {
                                    result = false;
                                }
                                //cb(errors,result);
                            }
                            if (inbounds.length < 1) {
                                valid = false;
                                //alert("ERROR !!! RELATIONSHIP node must have atleast one inbound link");
                                //break;
                                errors += "<li onclick='return mynodehighlight(" + i + ");'>"+ labelObj.joinTwoInbound+"</li>";
                                if (result) {
                                    result = false;
                                }
                                //cb(errors,result);
                            }
                        } else {
                            valid = false;
                            //alert("ERROR !!! RELATIONSHIP node must have atleast one outbound link");
                            //break;
                            errors += "<li onclick='return mynodehighlight(" + i + ");'>"+labelObj.forkOneInTwoOutbound+"</li>";
                            errors += "<li onclick='return mynodehighlight(" + i + ");'>"+labelObj.joinOneInTwoOutbound+"</li>";
                            if (result) {
                                result = false;
                            }
                        }
                    }
                   
                    if (allNodes[i].attributes.type != "fsa.StartState" && allNodes[i].attributes.type != "fsa.EndState" && allNodes[i].attributes.type != "app.Link" && allNodes[i].attributes.type != "fsa.State") {
                        var nodeText = '';
                        if (allNodes[i].attributes.type == 'app.RectangularModel' || allNodes[i].attributes.type == "bpmn.Gateway" || allNodes[i].attributes.type == "bpmn.Event"
                                        || allNodes[i].attributes.type == 'bpmn.DataObject' || allNodes[i].attributes.type == 'bpmn.Conversation' || allNodes[i].attributes.type == 'bpmn.Message'
                                        || allNodes[i].attributes.type == 'bpmn.Group' ) {
                            nodeText = allNodes[i].attributes.attrs['.label'].text;
                        }else if (allNodes[i].attributes.type == 'bpmn.Choreography' || allNodes[i].attributes.type == 'bpmn.Activity' || allNodes[i].attributes.type == 'bpmn.Annotation') {
                            nodeText = allNodes[i].attributes.attrs['.content'].html;
                        } else {
                            nodeText = allNodes[i].attributes.attrs.text.text;
                        }
                        if (nodeText == undefined || nodeText == null || nodeText.trim() == '') {
                            valid = false;
                            errors += "<li onclick='return mynodehighlight(" + i + ");'>"+labelObj.startEnd+"</li>";
                            if (result) {
                                result = false;
                            }
                        }
                    }
                    if (i == allNodes.length - 1) {
                        if (cb) {
                            cb(errors, result);
                        }
                    }

                }
            } else {
                if (cb) {
                    cb(errors, result);
                }
            }
        }
        function mynodehighlight(index) {
            var componentelement = app.graph.getElements();
            if (previousindex != undefined) {
                var clearelementview = app.paper.findViewByModel(componentelement[previousindex]);
                clearelementview.unhighlight(null);
            }
            var elementview = app.paper.findViewByModel(componentelement[index]);
            elementview.highlight();
            previousindex = index;
        }

        function compileAllLinksA(errors, result, cb) {
            var valid = true;
            var allLinks = app.graph.getLinks();
            var totalSources = 0;
            var allLinksLen = allLinks.length;
            if (allLinksLen > 0) {
                for (var i = 0; i < allLinksLen; i++) {

                    if (!allLinks[i].getSourceElement()) {
                        valid = false;
                        //alert("ERROR !!! Link must have atleast one source destination");
                        //break;
                        errors += "<li onclick='return mynode(" + i + ");'>"+labelObj.linkSource+"</li>";
                        if (result) {
                            result = false;
                        }
                        //cb(errors,result);
                    }
                    if (!allLinks[i].getTargetElement()) {
                        valid = false;
                        //alert("ERROR !!! Link must have atleast one target destination");
                        //break;
                        errors += "<li onclick='return mynode(" + i + ");'>"+labelObj.linkTarget+"</li>";
                        if (result) {
                            result = false;
                        }
                        //cb(errors,result);
                    }
                    if (i == allLinksLen - 1) {
                        if (cb) {
                            cb(errors, result);
                        }
                    }
                }
            } else {
                if (cb) {
                    cb(errors, result);
                }
            }
        }

        //validation erros in one shot end





        app.graph.on('cell:pointerclick', function (cellView) {
            cellView.highlight();
        });





        var circles = app.graph.getElements().filter(function (el) {
            return el instanceof joint.shapes.basic.Circle;
        });









        var to = false;
        $('#demo_q').keyup(function () {
            if (to) { clearTimeout(to); }
            to = setTimeout(function () {
                var v = $('#demo_q').val();
                $('#jstree_demo').jstree(true).search(v);
            }, 250);
        });
        function createTreeNow(fullTree) {

            $("#treeTopNav").show();
            $('#jstree_demo')
                .jstree({
                    "core": {
                        "check_callback": true,
                        'data': fullTree
                    },
                    "types": {
                        "#": {},
                        "root": { "icon": "/static/3.3.4/assets/images/tree_icon.png", "valid_children": ["default"] },
                        "default": { "valid_children": ["default", "file"] },
                        "file": { "icon": "/images/file.png", "valid_children": [] }


                    },
                    "contextmenu": {
                        "select_node": false,
                        'items': reportMenu,
                    },
                    "plugins": [ /* "dnd", "search", "state",*/ "types", "wholerow", "contextmenu"]

                });

            $('#jstree_demo').on("select_node.jstree", function (e, data) {
                $("#PreviewTable tbody").html('');
                isVersionPublished=false;
                isScenarioSelected = false;
                isNodeSelected = false;
                currentSelectedNode = data.node;
                if (data.node.original.type == 'file') {
                    var modelVersionId = '';
                    isAutoSave = false;
                    /* copyObject={
                         clonedNodes:{},
                         copyNodes:[],
                         pastedNodes:[]
                     }*/
                    $('#bodyoverlay').addClass('overlay');
                    $("#modal-bg").addClass('bgopacity');
                    $("#modelscenarioId").html("0");
                    $("#modelSanity").html("0");
                    $("#modelNormal").html("0");
                    $("#modelException").html("0");
                    $("#modelNodes").html("0");
                    $("#modelCriticality").html("0");
                    $("#sceDet_Type").val("0");
                    if ((data.node.id).split("_")[0] == "tesu") {
                        isTestSuite = true;
                        modelVersionId = (data.node.id).split("_")[2];
                        $("#PathCoveraTable tbody").html('');
                        $("#pathCoverageSceDetailsTable").html('');
                        $("#bar-chart-horizontal").hide();
                        $('#nodeTable tbody').html('');
                        $("#PathCoveraTable tbody").append("<table><tr><td><h5>Please selet a Scenario</h5></th></tr></table>");
                        //  $("#PreviewTable tbody").append("<table align='center'><tr><td ><h5>Please selet a Scenario</h5></th></tr></table>");
                        //  $("#nodeTraceTable tbody").append("<table align='center'><tr><td ><h5>Please selet a Scenario</h5></th></tr></table>");
                        app.paper.setInteractivity(false);
                        $(".stencil-icons").addClass('icon-btn-disable');
                        $("#exportexcel").addClass('icon-btn-disable');
                        $("#manualexportexcel").addClass('icon-btn-disable');
                        $("#exporttestcasetohpqc").addClass('icon-btn-disable');
                        $("#exporttestcasetojira").addClass('icon-btn-disable');
                        $("#exporttestcasetoopentest").addClass('icon-btn-disable');
                        displayhpalmbutton();
                        $("#scenarioTab").hide();
                        $("#TestConditions").hide();
                        $("#problemtab").hide();
                        $("#previewtest").show();
                        $("#PathCoveragetab").show();
                        $("#desctiptionTab").hide();
                        $("#requirementtab").hide();
                        $("[id^=sceIdCheck_All]").prop('checked', false);
                        openBottomToolbar();
                        $("#previewtest").click();
                        currentTab = '';
                        /*$(".paper-container").addClass('noPointer');*/
                        $('#btn-validate').addClass('icon-btn-disable');
                        $('#btn-png-save').addClass('icon-btn-disable');
                        $('#btn-png-scenario1').addClass('icon-btn-disable');
                        $('#btn-publish-version').addClass('icon-btn-disable');
                        $('#btn-undo').addClass('icon-btn-disable');
                        $('#btn-redo').addClass('icon-btn-disable');
                        $('#btn-clear').addClass('icon-btn-disable');
                        $('#btn-print').removeClass('icon-btn-disable');
                        $('#btn-layout').removeClass('icon-btn-disable');
                        $('#btn-fullscreen').removeClass('icon-btn-disable');
                        $('#btn-zoom-to-fit').removeClass('icon-btn-disable');
                        $('.zoomtofitbrackets').removeClass('icon-btn-disable');
                        $('#btn-zoom-out').removeClass('icon-btn-disable');
                        $('#btn-zoom-in').removeClass('icon-btn-disable');
                        $('#btn-zoom-slider-label').removeClass('icon-btn-disable');
                        $('#btn-zoom-slider').removeClass('icon-btn-disable');
                        $('#inspector-container-id').hide();
                        $(".Left-Cont-inspector").hide();
                    } else {
                        isTestSuite = false;
                        modelVersionId = (data.node.id).split("_")[1];
                        $("[id^=sceIdCheck_All]").prop('checked', false);
                        app.paper.setInteractivity(true);
                        $("#scenarioTab").show();
                        $("#TestConditions").show();
                        $("#problemtab").show();
                        $("#previewtest").hide();
                        $("#PathCoveragetab").hide();
                        $("#desctiptionTab").show();
                        $(".paper-container").removeClass('noPointer');
                        $("#sceDet_scenId").val("");
                        $("#sceDet_name").val("");
                        $("#sceDet_testEff").val("");
                        $("#sceDet_criticality").val("");
                        $("#sceDet_severity").val("");
                        $("#sceDet_defects").val("");
                        $("#sceDet_riskEx1").val("");
                        $("#sceDet_riskEx2").val("");
                        $("#requirementtab").show();
                        closeBottomToolbar();
                    }
                    $('#inspector-container-id').html('');
                    getAllComments(modelVersionId);
                    var reqData = { fileAdd: "MDS", modelVersionId: modelVersionId };
                    var modelStatusId =null;
                    sendAJAX(reqData, app_server_url, function (respData) {
                        var modelStatusObj = respData.data;
                        modelStatusId = modelStatusObj[0].status;
                        data.node.original.diag=modelStatusObj[0].diagram_data;
                        currentblogdaigram = data.node.original.diag;
                        if (!isTestSuite) {
                            if (modelStatusId != 7) {
                                isVersionPublished = false;
                                $('#btn-png-scenario1').removeClass('icon-btn-disable');
                                $('#btn-undo').removeClass('icon-btn-disable');
                                $('#btn-redo').removeClass('icon-btn-disable');
                                $('#btn-clear').removeClass('icon-btn-disable');
                                $('#btn-print').addClass('icon-btn-disable');
                                $('#btn-layout').removeClass('icon-btn-disable');
                                $('#btn-fullscreen').removeClass('icon-btn-disable');
                                $('#btn-zoom-to-fit').removeClass('icon-btn-disable');
                                $('.zoomtofitbrackets').removeClass('icon-btn-disable');
                                $('#btn-zoom-out').removeClass('icon-btn-disable');
                                $('#btn-zoom-in').removeClass('icon-btn-disable');
                                $('#btn-zoom-slider-label').removeClass('icon-btn-disable');
                                $('#btn-zoom-slider').removeClass('icon-btn-disable');
                                $('#inspector-container-id').show();
                                $(".Left-Cont-inspector").show();
                                $(".stencil-icons").removeClass('icon-btn-disable');
                                $('#btn-rev-eng').removeClass('icon-btn-disable');
                                enableSceAndTestCondTextBoxes();
                                app.paper.setInteractivity(true);
                            } else {
                                actionsOnPublishedModel();
                            }
                        }
                        processDiagramData();
                    });
                    function processDiagramData(){
                        if (data.node.original.diag) {
                            $('#bodyoverlay').addClass('overlay');
                            $("#modal-bg").addClass('bgopacity');
                            $(".navigator-container").show();
                            fromPath = 'Version Tree';                       
                            loadModelScenarios(modelVersionId);
                            currentblogdaigram = data.node.original.diag;
                            if (currentblogdaigram != null) {
                                app.graph.fromJSON(currentblogdaigram);
                                displayNodeCount(app.graph);
                            }
                            generateScenarios('tree', app.graph);
                            totalnumberofnodes = currentblogdaigram.cells.length;
                            $('.scenarioContainer').show();
                            var dscenariosDataDBLength = 0;
                            if (modelStatusId != 7 && !isTestSuite) {
                                dscenariosDataDBLength = scenariosDataDB.length;
                                if (dscenariosDataDBLength > 0) {
                                    $('#btn-publish-version').removeClass('icon-btn-disable');
                                }
                                else {
                                    $('#btn-publish-version').addClass('icon-btn-disable');
                                }
                                dscenariosDataDBLength = 0;
                            }
                            $('#bodyoverlay').removeClass('overlay');
                            $("#modal-bg").removeClass('bgopacity');                        
                        } else if (data.node.parent.length >= 9 && data.node.parent.substring(0, 8) === 'diagram_' && data.node.original.diag == null) {
                            $('.scenarioContainer').hide();
                            app.graph.clear();
                            $('#btn-validate').removeClass('icon-btn-disable');
                            $('#btn-undo').removeClass('icon-btn-disable');
                            $('#btn-redo').removeClass('icon-btn-disable');
                            $('#btn-clear').removeClass('icon-btn-disable');
                            $('#btn-print').addClass('icon-btn-disable');
                            $('#btn-layout').removeClass('icon-btn-disable');
                            $('#btn-fullscreen').removeClass('icon-btn-disable');
                            $('#btn-zoom-to-fit').removeClass('icon-btn-disable');
                            $('.zoomtofitbrackets').removeClass('icon-btn-disable');
                            $('#btn-zoom-out').removeClass('icon-btn-disable');
                            $('#btn-zoom-in').removeClass('icon-btn-disable');
                            $('#btn-zoom-slider-label').removeClass('icon-btn-disable');
                            $('#btn-zoom-slider').removeClass('icon-btn-disable');
                            $('#btn-rev-eng').removeClass('icon-btn-disable');
                            $('#inspector-container-id').show();
                            $(".Left-Cont-inspector").show();
                            $(".stencil-icons").removeClass('icon-btn-disable');
                            $('#bodyoverlay').removeClass('overlay');
                            $("#modal-bg").removeClass('bgopacity');
                        } else {
                            app.graph.clear();
                            loadModelScenarios(modelVersionId);
                            $('#bodyoverlay').removeClass('overlay');
                            $("#modal-bg").removeClass('bgopacity');
                        }
                    }                    
                }
                /*if((data.node.id).split("_")[0] == 'project'){
                 $(".projectMenu").hide();
                 $(".projectOption").show();
                 }

			 if((data.node.id).split("_")[0] == 'module'){
			 $(".projectMenu").hide();
			 $(".moduleOptions").show();
			 }
			 if((data.node.id).split("_")[0] == 'model'){
			 $(".projectMenu").hide();
			 $(".modelOptions").show();
             }*/
                if (data.node.id.substring(0, data.node.id.indexOf("_")) == "issue") {
                    var project_id = data.node.parents[2].substring(data.node.parents[2].indexOf('_') + 1, data.node.parents[2].length);
                    if (data.node.original.issueid != undefined) {
                        var issueData = { fileAdd: "GRI", issue_id: data.node.original.issueid, project_id: project_id };
                        sendAJAX(issueData, app_server_url, function (issueData) {
                            if (issueData.code == "200") {
                                displayRequirementPage(issueData.data,project_id);
                            } else {
                                dailogmsg(issueData.data);
                            }
                        });
                    }

                }

                if ((data.node.id).split("_")[0] == "version") {

                        var issueData = { fileAdd: "GVR", version_id: (data.node.id).split("_")[1] };
                        sendAJAX(issueData, app_server_url, function (reqData) {
                            if (reqData.code == "200") {
                                $("#requirementTable tbody tr ").remove();
                                var count = 0;
                                var requirementDetails = '';
                                if (reqData.data.length > 0) {
                                    for (var kk = 0; kk < reqData.data.length; kk++) {
                                        requirementDetails += '<tr><td>' + (kk + 1) + '</td><td style="text-align: center;"><a id='+reqData.data[kk].issue_id+'>' + reqData.data[kk].name + '</a></td></tr>';
                                    }
                                    $("#requirementTable").append(requirementDetails);
                                    $("#requirementMsg").html('');
                                } else {
                                    $("#requirementMsg").html(labelObj.reqna);
                                }

                            } else {

                                dailogmsg(reqData.msg);
                            }
                        });
                    }

            });
            $('#jstree_demo').bind('ready.jstree', function (e, data) {
                // invoked after jstree has loaded

                if (localStorage.getItem("ver") != undefined && localStorage.getItem("ver") != null && localStorage.getItem("ver") != '') {
                    selNodeVal = localStorage.getItem('ver');

                    data.instance._open_to(selNodeVal);
                    $('#' + selNodeVal + '_anchor').click();
                    localStorage.setItem("ver", '');
                }

            });
        }

        function displayRequirementPage(issueData,project_id) {
            var issue_Data = JSON.parse(issueData);
            var resolution = '';
            var assignee = '';
            var createdDate = '';
            var updatedDate = '';
            var description = ''
            var childData ='';
            if (issue_Data.fields.resolution == null) {
                resolution = "Unresolved"
            } else {
                resolution = issue_Data.fields.resolution
            }

            if (issue_Data.fields.assignee == null) {
                assignee = "Unassigned"
            } else {
                assignee = issue_Data.fields.assignee
            }

            if (issue_Data.fields.description != null) {
                description = issue_Data.fields.description
            }
           
            var parentKey = issue_Data.fields.votes.self.substring(issue_Data.fields.votes.self.indexOf(issue_Data.fields.project.key),issue_Data.fields.votes.self.indexOf("votes")-1);
            var issueData = { fileAdd: "GCR", projectName: issue_Data.fields.project.key, parentKey: parentKey,project_id : project_id };
            sendAJAX(issueData, app_server_url, function (data) {
            var childParseData = JSON.parse(data.data);  
            if(childParseData.childReq.length>0){
                childData+='<table id="summarytable"><thead><tr><th>Key</th><th>Summary</th></tr></thead><tbody>'; 
                var childReqLen = childParseData.childReq.length;   
              for(var kk=0;kk<childReqLen;kk++){
                childData+='<tr><td>'+childParseData.childReq[kk].key+'</td><td>'+childParseData.childReq[kk].summary+'</td>';
              }
              childData+='</tr></tbody></table>';
            }

            $('<div id="createreqdetailsmodal"  style="display: block;"  align="center">' +
                '<div id="header-modal" align="left">' +
                '<span>' + issue_Data.fields.summary + '</span>' +
                '</div>' +
                '<div id="body-modal" class="popupbodytxt">' +
                '<div style="text-align: left">Page: ' + issue_Data.fields.project.name+"/"+parentKey+'</div>' +
                '<div class="descriptionSpace"><h3 class="contentId"><span>Details</span></h3></div>' +
                '<div style="margin:10px" id="detailsbox">' +
                '<div><span>Type: ' + issue_Data.fields.issuetype.name + "</span> " + "<span>Status: " + issue_Data.fields.status.name + '</span></div>' +
                '<div><span>Priority: ' + issue_Data.fields.priority.name + "</span> " + "<span>Resolution: " + resolution + '</span></div>' +
                '<div><span>Reporter: ' + issue_Data.fields.reporter.emailAddress + "</span> " + "<span>Assignee: " + assignee + '</span></div>' +
                '<div><span>Created: ' + issue_Data.fields.created.substring(0, issue_Data.fields.created.indexOf(".")) + "</span> " + "<span>Updated: " + issue_Data.fields.updated.substring(0, issue_Data.fields.updated.indexOf(".")) + '</span></div>' +
                '<div>Labels: ' + "None" + '</div>' +
                '</div>' +
                '<div  class="descriptionSpace"><h3 class="contentId"><span>Description</span></h3></div>' +
                '<div class="footerdesc"><span style="margin:10px">' + description + '</span></div>' +
                '<div  class="ChildSpace"><h3 class="contentId"><span>Child Requirements</span></h3></div>'+
                '<div class="childReq"><span>' + childData + '</span></div>' +
                '</div>' +
                '<div id="footer-modal">' +
                '<input id="context-reqdetails-ok" type="button" value="'+labelObj.buttonOk+'">' +
                '</div>' +
                '</div>' +
                '</div>').appendTo('#popupdata');
            $('#modal-bg').addClass('bgopacity');
        });  
        }
    

        $(document).on('click', '#context-reqdetails-ok', function () {
            $('#modal-bg').removeClass('bgopacity');
            var divToRemove = $(document).find("#createreqdetailsmodal");
            divToRemove.html('');
            divToRemove.remove();
        });

        function actionsOnPublishedModel() {
            isVersionPublished = true;
            $('#btn-validate').addClass('icon-btn-disable');
            $('#btn-png-save').addClass('icon-btn-disable');
            $('#btn-png-scenario1').addClass('icon-btn-disable');
            $('#btn-publish-version').addClass('icon-btn-disable');
            $('#btn-undo').addClass('icon-btn-disable');
            $('#btn-redo').addClass('icon-btn-disable');
            $('#btn-clear').addClass('icon-btn-disable');
            $('#btn-print').removeClass('icon-btn-disable');
            $('#btn-layout').removeClass('icon-btn-disable');
            $('#btn-fullscreen').removeClass('icon-btn-disable');
            $('#btn-zoom-to-fit').removeClass('icon-btn-disable');
            $('.zoomtofitbrackets').removeClass('icon-btn-disable');
            $('#btn-zoom-out').removeClass('icon-btn-disable');
            $('#btn-zoom-in').removeClass('icon-btn-disable');
            $('#btn-zoom-slider-label').removeClass('icon-btn-disable');
            $('#btn-zoom-slider').removeClass('icon-btn-disable');
            $('#inspector-container-id').hide();
            $(".Left-Cont-inspector").hide();
            $(".stencil-icons").addClass('icon-btn-disable');
            $('#btn-rev-eng').addClass('icon-btn-disable');
            disableSceAndTestCondTextBoxes();
            app.paper.setInteractivity(false);
        }
        function reportMenu(data) {
            var dataArr = (data.id).split("_");
            var type = dataArr[0];
            var id = dataArr[1];
            var userId = session.userDetails.id;

            var items = {
                'Regression': {
                    'label': labelObj.regression,
                    "_class": "Regressionid",
                    'action': function () { contextmenu(data) }
                },
                'Delete': {
                    'label': labelObj.delete,
                    "_class": "TrashID",
                    'action': function () { deleteMenuData(type, id, userId) }
                },
                'Requirement': {
                    'label': labelObj.imporJira,
                    "_class": "RequirementID",
                    'action': function () { requirement(data) }
                },
                'Export': {
                    'label': 'Export to Bpmn',
                    "_class": "exportID",
                    'action': function () { exportToBpmn(data) }
                }
            };
            var IsLoggedIn;

            switch ((data.id).split("_")[0]) {
                case "project":
                    delete items.Regression;
                    delete items.Requirement;
                    delete items.Export;
                    if (!isAdmin) { delete items.Delete; delete  items.Requirement;}
                    if (isSuperAdmin){ delete  items.Requirement;}
                    break;
                case "module":
                    delete items.Regression;
                    delete items.Requirement;
                    delete items.Export;
                    if (!isAdmin) { delete items.Delete; delete  items.Requirement;}
                    if (isSuperAdmin){ delete  items.Requirement;}
                    break;
                case "model":
                    delete items.Regression;
                    delete items.Requirement;
                    delete items.Delete;
                    delete items.Export;
                    break;
                case "requirement":
                    delete items.Regression;
                    delete items.Delete;
                    delete items.Export;
                    if (!isAdmin) {delete items.Requirement; delete  items.Requirement;}
                    if (isSuperAdmin){ delete  items.Requirement;}
                    break;
                case "tesu":
                    delete items.Regression;
                    delete items.Delete;
                    delete items.Requirement;
                    delete items.Export;
                    break;
                case "version":
                    delete items.Regression;
                    delete items.Requirement;
                    if (!isAdmin) { delete items.Delete;delete  items.Requirement; }
                    if (isSuperAdmin){ delete  items.Requirement;}
                    break;
                case "diagram":
                    delete items.Requirement;
                    delete items.Export;
                    if (data.children.length < 2) {
                        delete items.Regression;
                    }
                    if (!isAdmin) { delete items.Delete;delete  items.Requirement;}
                    if (isSuperAdmin){ delete  items.Requirement;}
                    break;
                case "testSuite":
                    delete items.Regression;
                    delete items.Delete;
                    delete items.Requirement;
                    delete items.Export;
                    break;
                case "issue":
                    delete items.Regression;
                    //delete items.Delete;
                    delete items.Requirement;
                    delete items.Export;
                    break;
                default:
                    delete items.Regression;
                    delete items.Delete;
                    delete items.Requirement;
                    delete items.Export;
                    break;
            }

            /* if((data.id).split("_")[0] == 'project'||(data.id).split("_")[0] == 'module'||(data.id).split("_")[0] == 'model'
                 ||(data.id).split("_")[0] == 'requirement'|| (data.id).split("_")[0] == 'tesu' ||(data.id).split("_")[0] == 'version'){
                $('#jstree_demo').contextmenu.remove();
     
             }else{
     
                 if((data.id).split("_")[0] == 'diagram' || (data.id).split("_")[0] == 'testSuite') {
                     if (data.children.length < 2) {
                        $('#jstree_demo').contextmenu.remove();
                     }
                 }
             }*/
            return items;
        }

        function contextmenu(id) {

            var val = id.children;
            var split_val;
            var verarr1 = [];
            if ((id.id).split("_")[0] == 'testSuite') {
                for (var i = 0; i < val.length; i++) {
                    split_val = val[i].split("_")[2];
                    verarr1.push(split_val);
                }
            } else {
                for (var i = 0; i < val.length; i++) {
                    split_val = val[i].split("_")[1];
                    verarr1.push(split_val);
                }
            }



            var data = { fileAdd: "VM", versionId: verarr1 };
            var pusver = [];
            sendAJAX(data, app_server_url, function (data) {

                var mainObj = data.data;
                for (var i = 0; i < mainObj.length; i++) {
                    var id = mainObj[i].id;
                    var desc = mainObj[i].description;
                    pusver.push(id + ":" + desc);
                }
                localStorage.setItem("ver", $('#jstree_demo').jstree('get_selected'));
                window.location.href = app_server_url + "/pages/RegressionView.html?child=" + pusver+"&locale="+locale_global;
            });
        }
        var deleteData;
        var delteType;
        function deleteMenuData(type, id, userId) {
            var data;
            switch (type) {
                case "version":
                    data = { fileAdd: "DMV", versionId: id }; break;
                case "diagram":
                    data = { fileAdd: "DD", diagId: id }; break;
                case "module":
                    data = { fileAdd: "DM", modId: id }; break;
                case "project":
                    data = { fileAdd: "DP", projId: id }; break;
                case "issue":
                    data = {fileAdd:  "DR", issueId: id}; break;       
                default: return;
            }
            deleteConform(data, type);

        }
        function deleteConform(data, type) {
            deleteData = data;
            delteType = type;
            $('<div id="createdeletemodal"  style="display: block;"  align="center">' +
                '<div id="header-modal" align="left">' +
                '<span>'+labelObj.dialogHeaderConfirm+'</span>' +
                '</div>' +
                '<div id="body-modal" class="popupbodytxt">' +
                '<div>' +labelObj.deleteConfirmation + delteType + '</div>' +
                '<div id="footer-modal">' +
                '<input id="context-yes-delete" type="button" value="'+labelObj.buttonYes+'">' +
                '<input id="context-no-delete" type="button" value="'+labelObj.buttonNo+'">' +
                '</div>' +
                '</div>' +
                '</div>').appendTo('#popupdata');
            $('#modal-bg').addClass('bgopacity');
        }
        $(document).on('click', '#context-yes-delete', function () {
            sendAJAX(deleteData, app_server_url, function (data) {

                if (data["code"] == '200') {

                    if(delteType =='issue'){
                        delteType = "requirement";
                    }
                    dailogmsg(labelObj.deleteVersion+" "+delteType +" "+labelObj.deleteSuccessfully);
                } else {
                    dailogmsg(data["msg"]);
                }
                loadJSTree("onDelete");
            });
            $('#modal-bg').removeClass('bgopacity');
            var divToRemove = $(document).find("#createdeletemodal");
            divToRemove.html('');
            divToRemove.remove();
        });
        $(document).on('click', '#context-no-delete', function () {
            $('#modal-bg').removeClass('bgopacity');
            var divToRemove = $(document).find("#createdeletemodal");
            divToRemove.html('');
            divToRemove.remove();
        });
        
        function exportToBpmn(data){
            var version_split = data.id.split("_");
            var daigram_id =  version_split[1];
            var data = { fileAdd: "EBPF", daigram_id: daigram_id };
            sendAJAX(data,app_server_url,function(data){
             if(data.status!=undefined){
                $('<div id="createreqmodal"  style="display: block;"  align="center">' +
                                '<div id="header-modal" align="left">' +
                                '<span>Export Error</span>' +
                                '</div>' +
                                '<div id="body-modal" class="popupbodytxt">' +
                                '<div>BPMN export is not allowed due to having non bpmn components like Fork/Join/Decision/Activity/Send Signal/Accept Event.</div>' +
                                '<div id="footer-modal">' +
                                '<input id="context-no-req" type="button" value="Ok">' +
                                '</div>' +
                                '</div>' +
                                '</div>').appendTo('#popupdata');
                            $('#modal-bg').addClass('bgopacity');
             }else{
               var  xmltext =data.data
               var filename = data.daigramName+".bpmn";
               var pom = document.createElement('a');
               var bb = new Blob([xmltext], {type: 'text/plain'});
               pom.setAttribute('href', window.URL.createObjectURL(bb));
               pom.setAttribute('download', filename);
               pom.dataset.downloadurl = ['text/plain', pom.download, pom.href].join(':');
               pom.draggable = true; 
               pom.classList.add('dragout');
               pom.click();
             }   
               
                
            });

        }
        function requirement(data) {

            selected_module_id = data.id;

            var projectId = data.parents[1].substring(data.parents[1].indexOf("_") + 1, data.parents[1].length);
            var data = { fileAdd: "GRD", projectId: projectId };
            sendAJAX(data, app_server_url, function (data) {
                var requirementHTML = '';
                var requirementFolderHTML = '';
                if (data.code == "200") {
                    var requirementData = JSON.parse(data.data);
                    if(requirementData==undefined){
                        $('<div id="createreqmodal"  style="display: block;"  align="center">' +
                                '<div id="header-modal" align="left">' +
                                '<span>'+labelObj.dialogHeaderReqMap+'</span>' +
                                '</div>' +
                                '<div id="body-modal" class="popupbodytxt">' +
                                '<div>Requirement Not Available</div>' +
                                '<div id="footer-modal">' +
                                '<input id="context-no-req" type="button" value="'+labelObj.buttonOk+'">' +
                                '</div>' +
                                '</div>' +
                                '</div>').appendTo('#popupdata');
                            $('#modal-bg').addClass('bgopacity');
                    }else{
                        if (requirementData.issues.length > 0) {
                            for (var kk = 0; kk < requirementData.issues.length; kk++) {
                                var summary = requirementData.issues[kk].summary;
                                var description = requirementData.issues[kk].description;
                                var issue_id = requirementData.issues[kk].issueId;
                                requirementHTML += "<ul><li><input type='checkbox'  id='" + issue_id + "' value='" + summary + "@" + description + "@" + issue_id + "'/>" + requirementData.issues[kk].summary + "</li></ul>";
                            }
                            $('<div id="createreqmodal"  style="display: block;"  align="center">' +
                                '<div id="header-modal" align="left">' +
                                '<span>'+labelObj.dialogHeaderReqMap+'</span>' +
                                '</div>' +
                                '<div id="body-modal" class="popupbodytxt">' +
                                '<div id="requirementMapId"></div>' +
                                '<div id="footer-modal">' +
                                '<input id="context-yes-req" type="button" value="'+labelObj.buttonSave+'">' +
                                '<input id="context-no-req" type="button" value="'+labelObj.buttonCancel+'">' +
                                '</div>' +
                                '</div>' +
                                '</div>').appendTo('#popupdata');
                            $('#modal-bg').addClass('bgopacity');
                            $("#requirementMapId").append(requirementHTML);
                            disableMappedRequirement(selected_module_id);
                         } else {
                            var requirementjstree = [];
                            var level=0;
                            function getSubFolders(folders,level,parentId){
                                for (var index = 0; index < folders.length; index++) {    
                                    var folderName = folders[index].name;
                                    var parnetFolderId=level+"parent"+index;
                                     requirementjstree.push({ "id" : parnetFolderId, "parent" : parentId, "text" : folderName });                        
                                    var issues = folders[index].issues;
                                    for (var i = 0; i < issues.length; i++) {
                                        var keyname = issues[i].key;
                                        var requiementName = issues[i].summary;
                                        var tilteName = issues[i].summary;
                                        if(requiementName.length>70){
                                            requiementName = requiementName.substring(0,70)+"...";
                                        }
                                        var description = issues[i].description;
                                        var issue_id = issues[i].issueId;
                                        if(description==undefined){
                                            description = " ";
                                        }else{
                                            description = description;
                                        }
                                        var childId=parnetFolderId+'child'+i;
                                        requirementjstree.push({ "id" : childId, "parent" :  parnetFolderId, "text" : requiementName,"icon": "/images/require.png","a_attr":{"issueid":issue_id,"keyName":keyname+" "+requiementName,"title":tilteName}});
                                    }
                                    if(folders[index].folders!=undefined && folders[index].folders.length>0){        
                                        level+=1;          
                                        getSubFolders(folders[index].folders,level,parnetFolderId);
                                    } 
                                }  
                            }
                          if(requirementData.folders.length>0){  
                            getSubFolders(requirementData.folders,level,"#");
                            $('<div id="createreqmodal"  style="display: block;"  align="center">' +
                                '<div id="header-modal" align="left">' +
                                '<span>'+labelObj.dialogHeaderReqMap+'</span>' +
                                '</div>' +
                                '<div id="body-modal" class="popupbodytxt">' +
                                '<div id="requirementMapId"></div>' +
                                '<div id="footer-modal">' +
                                '<input id="context-yes-req" type="button" value="'+labelObj.buttonSave+'">' +
                                '<input id="context-no-req" type="button" value="'+labelObj.buttonCancel+'">' +
                                '</div>' +
                                '</div>' +
                                '</div>').appendTo('#popupdata');
                            $('#modal-bg').addClass('bgopacity');
                            $('#requirementMapId').jstree({ 'core' : {
                                'data' : requirementjstree                           
                            }, "checkbox" : {
                                "keep_selected_style" : false
                                },'data' : requirementjstree,
                                "plugins" : [ "checkbox" ]});
                           $("#requirementMapId").on("click",function(){
                            disableMappedRequirement(selected_module_id);
                           });
                           
                            $('.parentul').nestedCheckboxes();
                        }else{
                            $('<div id="createreqmodal"  style="display: block;"  align="center">' +
                                '<div id="header-modal" align="left">' +
                                '<span>'+labelObj.dialogHeaderReqMap+'</span>' +
                                '</div>'+
                                '<div id="body-modal" class="popupbodytxt">' +
                                '<div>Requirement Not Available</div>' +
                                '<div id="footer-modal">' +
                                '<input id="context-no-req" type="button" value="'+labelObj.buttonOk+'">' +
                                '</div>' +
                                '</div>' +
                                '</div>').appendTo('#popupdata');
                            $('#modal-bg').addClass('bgopacity');
                       }
                     
                    }
                      
                    } 
                        

            } else {
                dailogmsg(data.data);
            }
            });
            
        }


        $(document).on("click", ".plusimg", function () {
            $(".sub-Nav,.parentCheckbox").hide();
            $(this).parent().find('.sub-Nav').slideDown();
            $(this).parent().find('.parentCheckbox').show();
            $(this).parent().parent().find('.plusimg').removeClass('minusimg');
            if ($(this).parent().find('.sub-Nav').is(":visible")) {
                $(this).addClass('minusimg');
            }
        });


        $.fn.nestedCheckboxes = function (stopPropogation) {
            this.addClass('nestedCheckboxes');
            this.click(nestedCheckboxHandler);
            this.delegate(':has( > input:checkbox)', 'click', nestedCheckboxHandler);
            function nestedCheckboxHandler(evt) {
                if ($(evt.target).is("input:checkbox")) {
                    var parentContainer = $(this);
                    var checkbox = parentContainer
                        .find(' > input:checkbox:eq(0)');
                    var parentCheckbox = parentContainer
                        .parent()
                        .closest(':has( > input:checkbox)')
                        .children('input:checkbox');

                    if (evt.target == checkbox[0]) {
                        $('input:checkbox:not(:disabled)', parentContainer)
                            .prop("checked", checkbox.prop("checked"));
                    }
                    var parentCheckboxValue = !parentCheckbox
                        .parent()
                        .find("input:checkbox")
                        .not(parentCheckbox[0])
                        .is("input:checkbox:not(:checked)");

                    parentCheckbox.prop("checked", parentCheckboxValue);
                } else if (stopPropogation) {
                    evt.stopPropagation();
                }
            };
        };












        /* $(document).on("change", ".parentCheckbox", function () {
              c = $(this).is(':checked');            
              $(this).parent().parent().find(".singleClick").each(function () {
                  $(this).attr('checked', c);
              });
          });
          $(document).on("change", "input[type=checkbox]:not('.parentCheckbox')", function () {
              if ($(this).closest(".parentul").find("input[type=checkbox]:not('.parentCheckbox')").not(':checked').length < 1) {
                  $(this).closest(".parentul").find(".parentCheckbox").attr('checked', true);
              } else {
                  $(this).closest(".parentul").find(".parentCheckbox").attr('checked', false);
              }
          }); */
         
        $(document).on('click', '#context-yes-req', function () {
            var requirement_data = [];
          var selectedData = $('#requirementMapId').jstree('get_selected');
          $.each(selectedData,function(index,value){
            if($("#"+value+"_"+"anchor").attr("issueid")!=undefined){
                requirement_data.push($("#"+value+"_"+"anchor").attr("issueid")+":"+$("#"+value+"_"+"anchor").attr("keyName")+":"+value);
            }

          });

            $('#modal-bg').removeClass('bgopacity');
            var divToRemove = $(document).find("#createreqmodal");
            divToRemove.html('');
            divToRemove.remove();
            var data = { fileAdd: "SRD", requirement_data: requirement_data, module_id: selected_module_id };
            sendAJAX(data, app_server_url, function (data) {
                $('#jstree_demo').jstree("deselect_all");
                loadJSTree('onUpdate');
            });

            selected_module_id = '';
        });

        function disableMappedRequirement(selected_module_id) {
            
            var module_id = selected_module_id.substring(selected_module_id.indexOf("_") + 1, selected_module_id.length);
            var data = { fileAdd: "GID", module_id: module_id };
            sendAJAX(data, app_server_url, function (data) {
                $.each(data.data, function (index) {
                    $.each(data.data[index], function (key, val) {
                        $("#requirementMapId").jstree().disable_node("#"+val+"_anchor"); 
                            $('#bodyoverlay').removeClass('overlay');
                            $("#modal-bg").removeClass('bgopacity');
                        });   
                     
                     });

                });

        }

        $(document).on('click', '#context-no-req', function () {
            $('#modal-bg').removeClass('bgopacity');
            var divToRemove = $(document).find("#createreqmodal");
            divToRemove.html('');
            divToRemove.remove();
        });

        $(document).on('click', '#project-report-close', function () {
            $('#modal-bg').removeClass('bgopacity');
            var divToRemove = $(document).find("#createprojectreportmodal");
            divToRemove.html('');
            divToRemove.remove();
        });

      

        function importWorkflow() {
            try {
                var currentNode = (currentSelectedNode.id).split("_")[0];
                if (currentNode == "version") {
                    $("#importFile").css("display", "block");
                } else {
                    dailogmsg(labelObj.revCreateError1 + currentNode + "."+ labelObj.revCreateError2);
                }
            } catch (err) {
                dailogmsg(labelObj.revCreateError);
            }
        }

        function validatePort() {
            var currentProjectId = (currentSelectedNode.id).split("_")[2];
            var data = { fileAdd: "QCD", versionId: currentProjectId };
            sendAJAX(data, app_server_url, function (data) {
                if (data["code"] == '200') {
                    var qcdata = data.data;
                    var rolename = session.userDetails.roleName;
                    if (qcdata.length > 0) {
                        $("#uName").val(qcdata[0].qc_username);
                        $("#hppass").val(qcdata[0].qc_password);
                        $("#cURL").val(qcdata[0].qc_url);
                        $("#hpdomain").val(qcdata[0].qc_domain);
                        $("#hpproject").val(qcdata[0].qc_project);
                        if (rolename === 'User' || rolename === 'Super Admin') {
                            $("#cURL").attr("disabled", "disabled");
                            $("#hpdomain").attr("disabled", "disabled");
                            $("#hpproject").attr("disabled", "disabled");
                        }
                        $("#createQCLoginModal").css("display", "block");
                    } else {
                        if (rolename === 'User' || rolename === 'Super Admin') {
                            $("#msgid").html("please check with Admin for Configuration Settings").css('color', 'red');;
                        }
                        $("#uName").val("");
                        $("#hppass").val("");
                        $("#cURL").val("");
                        $("#hpdomain").val("");
                        $("#hpproject").val("");
                        if (rolename === 'User' || rolename === 'Super Admin') {
                            $("#cURL").attr("disabled", "disabled");
                            $("#hpdomain").attr("disabled", "disabled");
                            $("#hpproject").attr("disabled", "disabled");

                        }
                        $("#createQCLoginModal").css("display", "block");
                    }

                } else {
                    dailogmsg(data["msg"]);
                }
            });

        }
        function loadAvailableDomains() {

            $("#createDomainAndProjectModal").css("display", "block");
        }
        function loadAvailableProjects() {

        }
        $("#exporttestcasetohpqc").on('click', validatePort);
        //$("#QCLogin").on('click',loadAvailableDomains);
        $("#domainId").on('change', loadAvailableProjects);

        $(".createNewProject").on('click', createParent);
        $(".createNewModule").on('click', createModule);
        $(".createNewModel").on('click', createDiagram);
        $(".createNewVersion").on('click', createVersion);
        $("#adminId").on('click', createAdmin);
        $(".importFile").on('click', importWorkflow);

        function createAdmin() {
            if (session.userDetails.adminVisible === 'y') {
                localStorage.setItem("ver", $('#jstree_demo').jstree('get_selected'));
                locale_global=$('#langDD').val();    
                window.location.href = app_server_url + "/pages/admin.html?locale="+locale_global;
            } else {
                dailogmsg('You are not allowed to access admin screen');
            }
        }

        function createParent() {
            if (session.userDetails.roleName === 'Admin' || session.userDetails.roleName === 'Super Admin') {
                $("#busprojerror").html('');
                $("#projerror").html('');
                $("#createProjectModal").css("display", "block");
                $('.ui-igtrialwatermark').addClass('bgopacity');
            } else {
                dailogmsg('You are not allowed to create project');
            }
        }

        function createModule() {
            if (JSON.stringify(currentSelectedNode) != '{}') {
                var currentNode = (currentSelectedNode.id).split("_")[0];
                if (currentNode == "project") {
                    $("#createModuleModal").css("display", "block");
                    $('.ui-igtrialwatermark').addClass('bgopacity');
                }
            } else {
                if (currentNode == undefined) {
                    dailogmsg(labelObj.moduleCreateError);
                } else {
                    dailogmsg(labelObj.moduleCreateError1 + currentNode + "."+ labelObj.moduleCreateError2);
                }
            }
        }


        function createModel(module_name, id) {
            var name = 'Model';

            $('#jstree_demo').jstree().create_node(module_name, { "id": "model_" + id, "text": name, "icon": "/images/model.png" }, "last",
                function () {

                });

        }

        function createReq(module_name, id) {
            var name = 'Requirement';

            $('#jstree_demo').jstree().create_node(module_name, { "id": "requirement_" + id, "text": name, "icon": "/images/require.png" }, "last",
                function () {

                });

        }
        function createTS(module_name, id) {
            var name = 'Test Suite';

            $('#jstree_demo').jstree().create_node(module_name, { "id": "tesu_" + id, "text": name, "icon": "/images/as.png" }, "last",
                function () {

                });

        }

        function createDiagram() {
            if (JSON.stringify(currentSelectedNode) != '{}') {
                var currentNode = (currentSelectedNode.id).split("_")[0];
                if (currentNode == "model") {
                    $('#createDiagramModal').show();
                    $('.ui-igtrialwatermark').addClass('bgopacity');
                }
            } else {
                if (currentNode == undefined) {
                    dailogmsg(labelObj.daigramCreateError);
                } else {
                    dailogmsg(labelObj.daigramCreateError1 + currentNode + "."+ labelObj.daigramCreateError2);
                }
            }
            /*
             var name = prompt("Diagram name?");
             if(name){
             $('#jstree_demo').jstree().create_node('new_model', {"id": "new_diagram","text":name,"icon":"/images/fc.png" }, "last",
             function() {
             createVersion();
             });
             }
             */
        }

        function createVersion() {
            $('#default-version').click();
        }


        //[{id:1,text:"LITE",children:[{id:"a1",text:"Module 1",children:[{id:"a1a1",text:"Login",children:[{id:"aa11",text:"Version 0.1"}]}]}]}];
        session.userDetails = JSON.parse(localStorage.getItem("session"));
        //["Child 1", { "id" : "demo_child_1", "text" : "Child 2", "children" : [ { "id" : "demo_child_2", "text" : "One more", "type" : "file" }] }]

        function loadJSTree(action) {

            var data = { fileAdd: "GAPD" };
            sendAJAX(data, app_server_url, function (data) {


                var mainObj = data.data;

                var versions = [];

                var projectListNameArray = [];
                var projectListNameDetArray = {};

                var moduleListNameArray = {};
                var moduleListNameDetArray = {};

                var modelListNameArray = {};
                var modelListNameDetArray = {};

                var diagramListNameArray = {};
                var diagramListNameDetArray = {};

                var versionListNameArray = [];
                var versionListNameDetArray = {};

                var requirementListNameArray = [];
                var requirementListNameDetArray = {};

                for (var i = 0; i < mainObj.length ; i++) {

                    if (projectListNameArray.indexOf(mainObj[i].project_name+"_"+mainObj[i].project_id) == -1) {
                        projectListNameArray.push(mainObj[i].project_name+"_"+mainObj[i].project_id);
                        var accountName = mainObj[i].account_name
                        if (accountName.length > 10) {
                            accountName = accountName.substring(0, 7) + '...';
                        }
                        projectListNameDetArray['id'] = 'project_' + mainObj[i].project_id;
                        projectListNameDetArray['text'] = mainObj[i].project_name + '&nbsp;<span id="actNameId" title="' + mainObj[i].account_name + '">[ ' + ' ' + accountName + ' ]</span>'+""+""+'&nbsp;<img src="images/report.png" style="width: 13px;height: 13px;margin-top: 2px;" data-tooltip="'+labelObj.reportTxt+'" data-tooltip-position="bottom" class="projectreport" id='+mainObj[i].project_id+'>';
                        projectListNameDetArray['parent'] = '#';
                        versions.push(projectListNameDetArray);

                        projectListNameDetArray = {};
                        moduleListNameArray[mainObj[i].project_name] = [];
                    }


                    if (mainObj[i].module_name && moduleListNameArray[mainObj[i].project_name].indexOf(mainObj[i].module_name) == -1) {


                        moduleListNameArray[mainObj[i].project_name].push(mainObj[i].module_name);

                        moduleListNameDetArray['id'] = 'module_' + mainObj[i].module_id;
                        moduleListNameDetArray['text'] = mainObj[i].module_name;
                        moduleListNameDetArray['parent'] = 'project_' + mainObj[i].project_id;
                        moduleListNameDetArray['icon'] = "/images/module.png";
                        versions.push(moduleListNameDetArray);

                        moduleListNameDetArray = {};

                        diagramListNameArray[mainObj[i].module_name] = [];
                        //modelListNameArray[mainObj[i].project_name] = [];
                     

                        requirementListNameDetArray['id'] = 'requirement_' + mainObj[i].module_id;
                        requirementListNameDetArray['text'] = labelObj.reqText;
                        requirementListNameDetArray['icon'] = "/images/require.png";
                        requirementListNameDetArray['parent'] = 'module_' + mainObj[i].module_id;
                        versions.push(requirementListNameDetArray);
                        requirementListNameDetArray = {};

                        modelListNameDetArray['id'] = 'model_' + mainObj[i].module_id;
                        modelListNameDetArray['text'] = labelObj.modelText;
                        modelListNameDetArray['icon'] = "/images/model.png";
                        modelListNameDetArray['parent'] = 'module_' + mainObj[i].module_id;
                        versions.push(modelListNameDetArray);

                       

                        modelListNameDetArray = {};

                        modelListNameDetArray['id'] = 'tesu_' + mainObj[i].module_id;
                        modelListNameDetArray['text'] = labelObj.tsText;
                        modelListNameDetArray['icon'] = "/images/as.png";
                        modelListNameDetArray['parent'] = 'module_' + mainObj[i].module_id;
                        versions.push(modelListNameDetArray);

                        modelListNameDetArray = {};
                    }

                    /*	if(modelListNameArray[mainObj[i].project_name].indexOf(mainObj[i].module.name) == -1){
    
    
                     modelListNameArray[mainObj[i].project_name].push(mainObj[i].module.name);
    
                     modelListNameDetArray['id'] = 'model_'+mainObj[i].module.id;
                     modelListNameDetArray['text'] = "Model";
                     modelListNameDetArray['parent'] = 'module_'+mainObj[i].module.id;
                     versions.push(modelListNameDetArray);
    
                     modelListNameDetArray = {};
    
                     modelListNameDetArray['id'] = 'requirement_'+mainObj[i].module.id;
                     modelListNameDetArray['text'] = "Requirement";
                     modelListNameDetArray['parent'] = 'module_'+mainObj[i].module.id;
                     versions.push(modelListNameDetArray);
    
                     modelListNameDetArray = {};
    
                     modelListNameDetArray['id'] = 'tesu_'+mainObj[i].module.id;
                     modelListNameDetArray['text'] = "Test Suite";
                     modelListNameDetArray['parent'] = 'module_'+mainObj[i].module.id;
                     versions.push(modelListNameDetArray);
    
                     modelListNameDetArray = {};
                     }*/
                    if (mainObj[i].requirement_id != null) {
                        if (requirementListNameArray.indexOf(mainObj[i].summary + "_" + mainObj[i].requirement_id) == -1) {
                            requirementListNameArray.push(mainObj[i].summary + "_" + mainObj[i].requirement_id)
                            requirementListNameDetArray['id'] = 'issue_' + mainObj[i].requirement_id;
                            requirementListNameDetArray['text'] = mainObj[i].summary;
                            requirementListNameDetArray['icon'] = "/images/require.png";
                            requirementListNameDetArray['parent'] = 'requirement_' + mainObj[i].module_id;
                            requirementListNameDetArray['issueid'] = mainObj[i].issue_id;
                            versions.push(requirementListNameDetArray);
                            requirementListNameDetArray = {};
                        }
                    }

                    if (diagramListNameArray[mainObj[i].module_name] && mainObj[i].diagram_name && diagramListNameArray[mainObj[i].module_name].indexOf(mainObj[i].diagram_name) == -1) {

                        diagramListNameArray[mainObj[i].module_name].push(mainObj[i].diagram_name);
                        diagramListNameDetArray['id'] = 'diagram_' + mainObj[i].diagram_id;
                        diagramListNameDetArray['text'] = mainObj[i].diagram_name;
                        diagramListNameDetArray['icon'] = "/images/fc.png";
                        diagramListNameDetArray['parent'] = 'model_' + mainObj[i].module_id;
                        versions.push(diagramListNameDetArray);

                        var testSuiteDetArray = {};
                        testSuiteDetArray['id'] = 'testSuite_' + mainObj[i].diagram_id;
                        testSuiteDetArray['text'] = mainObj[i].diagram_name;
                        testSuiteDetArray['icon'] = "/images/fc.png";
                        testSuiteDetArray['parent'] = 'tesu_' + mainObj[i].module_id;

                        versions.push(testSuiteDetArray);

                        diagramListNameDetArray = {};
                    }
                  if(mainObj[i].diagram_id!=null && mainObj[i].description!=null){
                    if (mainObj[i].name && versionListNameArray.indexOf(mainObj[i].description + "_" + mainObj[i].diagram_id) == -1) {
                     
                        versionListNameArray.push(mainObj[i].description + "_" + mainObj[i].diagram_id)
                        versionListNameDetArray['id'] = 'version_' + mainObj[i].id;
                        versionListNameDetArray['text'] = labelObj.verText+' ' + mainObj[i].name;
                        versionListNameDetArray['parent'] = 'diagram_' + mainObj[i].diagram_id;
                        versionListNameDetArray['type'] = 'file';
                        versionListNameDetArray['diag'] = null;
                        versionListNameDetArray['state'] = { selected: false };
                        versions.push(versionListNameDetArray);

                        var tesuVersionListNameDetArray = {};
                        tesuVersionListNameDetArray['id'] = 'tesu_version_' + mainObj[i].id;
                        tesuVersionListNameDetArray['text'] = labelObj.verText+' ' + mainObj[i].name;
                        tesuVersionListNameDetArray['parent'] = 'testSuite_' + mainObj[i].diagram_id;
                        tesuVersionListNameDetArray['type'] = 'file';
                        tesuVersionListNameDetArray['icon'] = "/images/file.png";
                        tesuVersionListNameDetArray['diag'] = null;
                        tesuVersionListNameDetArray['state'] = { selected: false };
                        versions.push(tesuVersionListNameDetArray);

                        versionListNameDetArray = {};
                     }  
                  }

            } 
                if (action == 'onLoad') {
                    createTreeNow(versions);
                    $('#bodyoverlay').removeClass('overlay');
                    $('.MainHeading').show();
                    $('.toolbar-container').show();
                    $('.icon-heading-buttons').show();
                    $('.Main-Container').show();
                } else {
                    $('#jstree_demo').jstree(true).settings.core.data = versions;
                    $('#jstree_demo').jstree(true).refresh();
                }
            });
        }

        //loadJSTree('onLoad');

        function openBottomToolbar() {
            $('.bottomPanel').show();
            //$(".tabcontent").show();
            $('.bottomPanel').animate({ 'height': 200 }, 500, function () {

            });
        }

    function displayhpalmbutton(){
        var versionId = (currentSelectedNode.id).split("_")[2];
            var data = {fileAdd:"CDP",id:versionId};
            sendAJAX(data,app_server_url,function(data){
                var projectData =data.data;
                var projectVal= JSON.parse(JSON.stringify(projectData));
                if(projectVal.status=='7'){
                    $("#exporttestcasetohpqc").show();
                    $("#exporttestcasetojira").show();
                   
                }else{
                    $("#exporttestcasetohpqc").hide();
                    $("#exporttestcasetojira").hide();
                }

                if(projectVal.tool_type!=null && projectVal.tool_type==4){
                    $("#exportexcel").hide();
                    $("#exporttestcasetoopentest").show();
                }else{
                    $("#exportexcel").show();
                    $("#exporttestcasetoopentest").hide();
                }
            });
        }

        $(document).on("click",".projectreport",function(){
            let projectId = $(this).attr("id");
            let rowText=$('#project_'+projectId+'_anchor').text();
            let data = {fileAdd:"PRS",project_id:projectId,proj_name:rowText};
            sendAJAX(data,app_server_url,function(data){
                 let projectReportData =data.data;               
                 let moduleData = projectReportData.moduleData;
                 let modelRow='';
                 if(moduleData.length>0){
                     var addTotalRowCounter=0;
                     var modalTotalTCount=0;
                     var modalHighTCount=0;
                     var modalMediumTCount=0;
                     var modalLowTCount=0;
                     var modalSanityTCount=0;
                     var modalExcepTCount=0;
                     var modalTCount;
                    for(let i=0;i<moduleData.length;i++){
                        if(moduleData[i].rowSpanCount!=0) {
                            modelRow+='<tr><td rowspan="'+(moduleData[i].rowSpanCount+1)+'">'+ moduleData[i].moduleName+"</td>";
                            addTotalRowCounter=moduleData[i].rowSpanCount;
                            modalTotalTCount=parseInt(moduleData[i].totalTc);
                            modalHighTCount=parseInt(moduleData[i].highTc);
                            modalMediumTCount=parseInt(moduleData[i].mediumTc);
                            modalLowTCount=parseInt(moduleData[i].lowTc);
                            modalSanityTCount=parseInt(moduleData[i].sanityTc);
                            modalExcepTCount=parseInt(moduleData[i].exceptionTc);
                        } else{
                            modelRow+="<tr>";
                            modalTotalTCount+=parseInt(moduleData[i].totalTc);
                            modalHighTCount+=parseInt(moduleData[i].highTc);
                            modalMediumTCount+=parseInt(moduleData[i].mediumTc);
                            modalLowTCount+=parseInt(moduleData[i].lowTc);
                            modalSanityTCount+=parseInt(moduleData[i].sanityTc);
                            modalExcepTCount+=parseInt(moduleData[i].exceptionTc);
                        }
                        addTotalRowCounter--;                        
                        modelRow+="<td>"+moduleData[i].diagramName+" (<span class='project_report_version' id='project_report_"+moduleData[i].versionId+"'>Version "+moduleData[i].versionNumber+"</span>)"+"</td><td>"+
                                moduleData[i].totalTc+"</td><td>"+
                                    moduleData[i].highTc+"</td><td>"+
                                        moduleData[i].mediumTc+"</td><td>"+
                                            moduleData[i].lowTc+"</td><td>"+
                                                moduleData[i].sanityTc+"</td><td>"+
                                                    moduleData[i].exceptionTc+"</td></tr>";
                        /* }else{
                        moduleRow+="<tr><td>"+modelDetails.modelname+"</td><td>"+modelDetails.tcCount+"</td><td>"+modelDetails.High+"</td><td>"+modelDetails.Low+"</td><td>"+modelDetails.Medium+"</td><td>"+modelDetails.sanity+"</td><td>"+modelDetails.exception+"</td></tr>"; 
                        } */
                        if(addTotalRowCounter==0){
                            modelRow+="<td class='proj_repo_tot_row'>Total</td><td class='proj_repo_tot_row'>"+
                                modalTotalTCount+"</td><td class='proj_repo_tot_row'>"+
                                    modalHighTCount+"</td><td class='proj_repo_tot_row'>"+
                                        modalMediumTCount+"</td><td class='proj_repo_tot_row'>"+
                                            modalLowTCount+"</td><td class='proj_repo_tot_row'>"+
                                                modalSanityTCount+"</td><td class='proj_repo_tot_row'>"+
                                                    modalExcepTCount+"</td></tr>";
                        }
                    }
                }else{
                    modelRow='<tr><td colspan=8>No Records Found</td></tr>';
                }
                $('<div id="createprojectreportmodal"  style="display: block;"  align="center">' +
                                '<div id="header-modal" align="left">' +
                                '<span>'+labelObj.dialogHeaderprojMet+'</span>' +
                                '</div>'+
                                '<div id="body-modal" class="popupbodytxt">' +
                                '<div>'+
                                '<table id="project_report_topTable">'+   
                                '<tr><td><b>'+labelObj.pmProjName+':</b>&nbsp;'+ projectReportData.projectName+'</td><td><b>'+labelObj.pmActName+':</b>&nbsp;'+ projectReportData.actName+'</td><td><b>'+labelObj.pmTcCount+':</b>&nbsp;'+projectReportData.allTC+'</td></tr>'+
                                '</table>'+
                                '<div id="pr_bottomTable_div">'+
                                '<table id="project_report_bottomTable">'+
                                 '<thead><tr><th>'+labelObj.pmModuleName+'</th><th>'+labelObj.pmDiagName+'</th><th>'+labelObj.pmTotTC+'</th><th>'+labelObj.pmHigh+'</th><th>'+labelObj.pmMedium+'</th><th>'+labelObj.pmLow+'</th><th>'+labelObj.pmSanity+'</th><th>'+labelObj.pmException+'</th></tr></thead>'+ 
                                 '<tbody>'+ modelRow+
                                 '</tbody>'+   
                                 '</table>'+ 
                                 '</div>' + 
                                 '</div>' +
                                '<div id="footer-modal">' +
                                '<input id="project-report-close" type="button" value="'+labelObj.buttonClose+'">' +
                                '</div>' +
                                '</div>' +
                                '</div>').appendTo('#popupdata');
                 $('#modal-bg').addClass('bgopacity');
            });
            
        });

        

        $(".toolbarClose").click(function () {
            closeBottomToolbar();
        });
        function closeBottomToolbar() {
            /*$('.bottomPanel').animate({'height': 0},100, function(){
    
            });*/
            $('.bottomPanel').hide();
        }

        function rowCount(count) {
            rCount = count.parentNode.rowIndex;
            dailogmsg("row count is: " + rCount);
        }

        $(function () {
            $('#tes_cond_action').change(function () {
                getSelectedItem(this, null);
            });

            $('#tes_cond_targettype').change(function () {
                //getSelectedItem(this, null);
                autoPopulateItemTarget_Type(this, null);
            });

            $('#add_row').click(function () {
                addRowSaveDb('dataTable');
            });

            $('#add_row_data').click(function () {
                addRowDataSaveDb('testDataTable');
            });

            $('#delete_row').click(function () {
                validateStepDel('dataTable');
            });

            $('#delete_row_data').click(function () {
                validateDataDel('testDataTable');
            });

            $('#tes_cond_target').change(function () {
                autoPopulateItemTarget(this, null);
            });

            $('#tes_cond_step_data').change(function () {
                autoPopulateItemStepData(this, null);
            });

            $('#download_template_TestStep').click(function () {
                window.open("./ExcelTemplate/ExcelTemplate_TestCond.xlsm");
                //window.open("./ExcelTemplate/ExcelTemplate_TestData.xlsx");
            });

            $('#download_template_TestData').click(function () {
                //window.open("./ExcelTemplate/ExcelTemplate_TestCond.xlsm");
                window.open("./ExcelTemplate/ExcelTemplate_TestData.xlsx");
            });

        });

        $(".previewTestCasetoolbarClose").click(function () {
            closeBottomToolbar();
        });

    /*function closeBottomToolbar(){
        $('.bottomPanel1').animate({'height': 0},100, function(){

        });
    }
*/

/*
    function selectVersionCopy(){
        var name = prompt("Project name?");
        if(name){

            var data = {fileAdd:"CNP",name:name};
            sendAJAX(data,app_server_url,function(data){
                console.log(data);
                if(data["code"] == '200'){
                    $('#jstree_demo').jstree().create_node('#', {"id": "project_"+data.data[0].id,"text":name }, "last",
                        function() {
                            alert("Saved successfully");
                        });


                }else{
                    alert(data["msg"]);
                }
            });


        }
    }

*/

    </script>

    <!-- Local file warning: -->
    <div id="message-fs" style="display: none;">
        <p>The application was open locally using the file protocol. It is recommended to access it trough a
            <b>Web server</b>.</p>
        <p>Please see
            <a href="README.md">instructions</a>.</p>
    </div>
    <script>
        (function () {
            var fs = (document.location.protocol === 'file:');
            var ff = (navigator.userAgent.toLowerCase().indexOf('firefox') !== -1);
            if (fs && !ff) {
                (new joint.ui.Dialog({
                    width: 300,
                    type: 'alert',
                    title: 'Local File',
                    content: $('#message-fs').show()
                })).open();
            }
        })();

    </script>

    <script>
        $(".tablinks").click(function (e) {
            $(".tablinks").removeClass('active');
            var tabName = $(this).data('prop');
            var i, tabcontent, tablinks;
            // $(".tablinks").removeClass('activeTab');
            $(this).addClass('active');
            $(".tabcontent").hide();
            $("#" + tabName).show();
            if (tabName == 'node_trace' && !isTestSuite) {
                currentTab = 'NodeTarceability';
            } else if (tabName == 'tes_cond') {
                currentTab = 'TestCondition';
            } else if (tabName == 'step_desc') {
                isscenariotab = true;
                currentTab = 'Description';
            }
        });

        $("#HpQCCancel").click(function (e) {
            $("#createQCLoginModal").hide();
        });

        $("#importcancel").click(function (e) {
            $("#importFile").css("display", "none");
        });

    </script>

    <script>
        var isAdmin = false;
        var isSuperAdmin = false;

    $(document).ready(function(){ 
		loadI18Ndata('HOME');
        $("#stencilleftArrow").hide();
        $("#stencilrightArrow").click(function(){
            $(this).hide();
            $("#stencilleftArrow").show();
            $(".content .group:nth-child(1)").css("visibility","hidden");
            $(".content .group:nth-child(2)").css("visibility","initial");
        });
        $("#stencilleftArrow").click(function(){
            $(this).hide();
            $("#stencilrightArrow").show();
            $(".content .group:nth-child(2)").css("visibility","hidden");
            $(".content .group:nth-child(1)").css("visibility","initial");
        });
        $("#automationIntegration").change(function(){
               var test = $("#automationIntegration option:selected").index();  
               if(test == 1){
                $("#typeoptions").show();
               }else{
                $("#typeoptions").hide();
               }
    });

        $(".more-btn").click(function(){
              $(this).hide();
              $("#post-btn").show();
             $("#nav-Container").hide();
             $(".insideContainer").css({ "height":"400px","overflow-y":"scroll"});
             $('.closemet-btn').show();
             $(".moreCommentsDiv").show();
             $('#addCommentId').show();
            $('.latestComments').hide();
        });
          $('.closemet-btn').click(function(){
              $(this).hide();
              $(".more-btn").show();
              $("#nav-Container").show();
              $("#post-btn").hide();
              $(".insideContainer").css({ "height":"110px","overflow-y":"initial"});  
              $(".moreCommentsDiv").hide();              
              if($('#commentstabdis').html()>0){
                $('#addCommentId').hide();
                $('.latestComments').show();
              }else{
                $('#addCommentId').show();
                $('.latestComments').hide();
              }
          });
      
        /*model metrics tabbing functionality*/ 

            $(".modelmet").click(function () {
                $(this).attr("id", "current");
                $(".modelcomments").attr("id", "");
                $(".tabcontentone").show();
                $(".tabcontenttwo").hide();
                $("#nav-Container").show();
            });
            $(".modelcomments").click(function () {
                $(this).attr("id", "current");
                $(".modelmet").attr("id", "");
                $(".tabcontentone").hide();
                $(".tabcontenttwo").show();
                if ($('.moreCommentsDiv').is(":visible")) {
                    $('#addCommentId').show();
                    $('.latestComments').hide();
                    $("#nav-Container").hide();
                }
            });



            var fromsc = getParameterByName("fm");
            if (fromsc != "" && fromsc == "RE") {
                $("#btn-validate").removeClass('icon-btn-disable');
                $("#btn-png-save").removeClass('icon-btn-disable');
                var uri = window.location.toString();
                if (uri.indexOf("?") > 0) {
                    var clean_uri = uri.substring(0, uri.indexOf("?"));
                    window.history.replaceState({}, document.title, clean_uri);
                }
            }
            $('.accordionlefttabs').on("click", function () {
                $(this).find('i').toggleClass('fa-plus');
                $(".accordion-container").slideToggle();
            });
            $('.accordionlefttabsthree').on("click", function () {
                $(this).find('i').toggleClass('fa-plus');
                $(".accordion-containerthree").slideToggle();
            });
            $('.accordionlefttabinspector').on("click", function () {
                $(this).find('i').toggleClass('fa-plus');
                $("#inspector-container-id").slideToggle();
            });
            session.userDetails = JSON.parse(localStorage.getItem("session"));
            if (session.userDetails != undefined) {
                //printUserName(session.userDetails.name);
                getAccountDetails(session.userDetails.baccount_id);
            }
            if (session.userDetails.roleName === 'Admin' || session.userDetails.roleName === 'Super Admin') {
                isAdmin = true;
            }
            
            if(session.userDetails.roleName === 'Super Admin'){
                isSuperAdmin = true;
            }

            if (!isAdmin) {
                $("#adminId").remove();
                $("#adminGuideId").remove();
            }
        });
        function getParameterByName(name) {
            name = name.replace(/[\[]/, "\\[").replace(/[\]]/, "\\]");
            var regex = new RegExp("[\\?&]" + name + "=([^&#]*)"),
                results = regex.exec(location.search);
            return results === null ? "" : decodeURIComponent(results[1].replace(/\+/g, " "));
        }
    </script>
    <div class="overlay" id="bodyoverlay"></div>
    <div id="modal-bg"></div>
    <div id="jstree-context-menu"></div>

</body>

</html>
